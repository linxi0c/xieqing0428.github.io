<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>听泉.ღ</title>
  
  <subtitle>— 听泉小窝 —</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://alessa0.cn/"/>
  <updated>2019-07-17T09:48:22.139Z</updated>
  <id>https://alessa0.cn/</id>
  
  <author>
    <name>Alessa0</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>BigData复习笔记01：HDFS1.0与MapReduce</title>
    <link href="https://alessa0.cn/posts/34c278f3/"/>
    <id>https://alessa0.cn/posts/34c278f3/</id>
    <published>2019-07-17T08:10:55.000Z</published>
    <updated>2019-07-17T09:48:22.139Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">HDFS1.0与MapReduce</p><br><a id="more"></a><p></p><blockquote class="blockquote-center"><p>blah blah blah</p></blockquote><p></p><div class="text-center"><a class="btn" href="/path/to/url/"><i class="fa fa-home fa-lg fa-fw"></i>text</a></div><p></p><p>##</p><figure class="highlight plain"><figcaption><span>[title] [url] [link-text]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[language] 是代码语言的名称，diff 用来设置代码块颜色高亮，非必须；-红+绿</span><br><span class="line">[title] 是顶部左边的说明，非必须；</span><br><span class="line">[url] 是顶部右边的超链接地址，非必须；</span><br><span class="line">[link text] 如它的字面意思，超链接的名称，非必须。</span><br><span class="line">代码</span><br></pre></td></tr></table></figure><h1><a href="#" class="headerlink" title="#"></a>#</h1><p>@ 前面的是<code>label</code>的名字，后面的是要显示的文字）：</p><ul><li>default</li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-variable">&#123;% label <span class="keyword">default</span>@<span class="keyword">default</span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><ul><li>primary</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">label</span> primary@primary %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><ul><li>success</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">label</span> success@success %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><ul><li>info</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">label</span> info@info %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><ul><li>warning</li></ul><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label <span class="keyword">warning</span>@warning %&#125;</span><br></pre></td></tr></table></figure><ul><li>danger</li></ul><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">label</span> danger@danger %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">tabs</span> 选项卡, 1 %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 1** 呵呵哈哈哈哈哈哈哈哈呵呵哈哈哈哈哈哈哈哈呵呵哈哈哈哈哈哈哈哈呵呵哈哈哈哈哈哈哈哈呵呵哈哈哈哈哈哈哈哈呵呵哈哈哈哈哈哈哈哈……</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 2**</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- tab --&gt;</span></span></span><br><span class="line"><span class="xml">**这是选项卡 3** 哇，你找到我了！φ(≧ω≦*)♪～</span></span><br><span class="line"><span class="xml"><span class="comment">&lt;!-- endtab --&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name">endtabs</span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% pdf <span class="regexp">/path/</span>to<span class="regexp">/your/</span><span class="keyword">file</span>.pdf %&#125;</span><br></pre></td></tr></table></figure><p><br></p><p><meting-js server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://wiki.hushhw.cn/posts/ac7121e8.html">《数据库系统概论》学习笔记之关系数据库</a></li><li><a href="https://wiki.hushhw.cn/posts/b8222433.html">《数据库系统概论》学习笔记之绪论</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;HDFS1.0与MapReduce&lt;/p&gt;&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="复习笔记" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="复习笔记" scheme="https://alessa0.cn/tags/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="HDFS1.0" scheme="https://alessa0.cn/tags/HDFS1-0/"/>
    
      <category term="MapReduce" scheme="https://alessa0.cn/tags/MapReduce/"/>
    
  </entry>
  
  <entry>
    <title>Flink电商团购项目（一）</title>
    <link href="https://alessa0.cn/posts/451f3483/"/>
    <id>https://alessa0.cn/posts/451f3483/</id>
    <published>2019-05-17T08:20:11.000Z</published>
    <updated>2019-07-17T09:48:22.139Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Flink项目环境搭建</p><br><img src="https://image.alessa0.cn/090812.jpg" alt="daniel-chen-546446-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>第一章 大数据集群搭建</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://flink.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Flink</a></div><p></p><h1 id="集群环境"><a href="#集群环境" class="headerlink" title="集群环境"></a>集群环境</h1><h3 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h3><p>CentOS-7-x86_64-Minimal-1810.iso</p><ul><li><strong>flink-master1</strong> 192.168.69.121 <strong>2core</strong> <strong>2G</strong></li><li><strong>flink-master2</strong> 192.168.69.122 <strong>2core</strong> <strong>2G</strong></li><li><strong>flink-slave1</strong> 192.168.69.123 <strong>1core</strong> <strong>2G</strong></li><li><strong>flink-slave2</strong> 192.168.69.124 <strong>1core</strong> <strong>2G</strong></li><li><strong>flink-slave3</strong> 192.168.69.125 <strong>1core</strong> <strong>2G</strong></li></ul><h3 id="Hadoop集群组件列表"><a href="#Hadoop集群组件列表" class="headerlink" title="Hadoop集群组件列表"></a>Hadoop集群组件列表</h3><table><thead><tr><th>组件</th><th style="text-align:center">Master1</th><th style="text-align:center">Master2</th><th style="text-align:center">Slave1</th><th style="text-align:center">Slave2</th><th style="text-align:center">Slave3</th></tr></thead><tbody><tr><td>jdk1.8.0_212</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>scala-2.11.12</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>miniconda3</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>hadoop2.7.0</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>kafka0.11</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>mariadb/mariadb-server</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>Hive2.2.0</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>zookeeper 3.4.9</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>Flume1.9</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>Flink1.7</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr></tbody></table><blockquote><p>组件安装步骤参考往期系列文章</p><p><a href="https://alessa0.cn/posts/aaa0d5f4/">Flink电商团购项目（零）</a></p><p><a href="https://alessa0.cn/categories/技术/大数据/环境搭建/">Hadoop环境搭建</a></p></blockquote><p><br></p><p><meting-js id="1338746736" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://blogs.kainy.cn/2013/06/通行证项目前端开发小结/">通行证项目前端开发小结</a></li><li><a href="https://blogs.kainy.cn/2013/04/拾贝电台开源了/">拾贝电台开源了</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Flink项目环境搭建&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/090812.jpg&quot; alt=&quot;daniel-chen-546446-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="项目实战" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
      <category term="Flink电商团购" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/Flink%E7%94%B5%E5%95%86%E5%9B%A2%E8%B4%AD/"/>
    
      <category term="01-大数据集群搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/Flink%E7%94%B5%E5%95%86%E5%9B%A2%E8%B4%AD/01-%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Flink" scheme="https://alessa0.cn/tags/Flink/"/>
    
      <category term="项目" scheme="https://alessa0.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
      <category term="电商" scheme="https://alessa0.cn/tags/%E7%94%B5%E5%95%86/"/>
    
  </entry>
  
  <entry>
    <title>Flink电商团购项目（零）：环境搭建</title>
    <link href="https://alessa0.cn/posts/8d61cd2a/"/>
    <id>https://alessa0.cn/posts/8d61cd2a/</id>
    <published>2019-05-17T08:20:10.000Z</published>
    <updated>2019-07-17T09:48:22.140Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Flink项目环境搭建</p><br><img src="https://image.alessa0.cn/045237.jpg" alt="janko-ferlic-214224-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>第一章 大数据集群搭建</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://flink.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Flink</a></div><p></p><h1 id="集群组件安装"><a href="#集群组件安装" class="headerlink" title="集群组件安装"></a>集群组件安装</h1><h3 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h3><ul><li><code>cd /mnt/hgfs/aboutyun</code></li><li><code>cp jdk-8u212-linux-x64.tar.gz /usr/aboutyun</code></li><li><code>cd /usr/aboutyun</code></li><li><code>tar zxvf jdk-8u212-linux-x64.tar.gz</code></li><li><code>rm -rf jdk-8u212-linux-x64.tar.gz</code></li><li><code>mv jdk1.8.0_212 jdk</code></li></ul><p><strong>#配置JDK环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET JAVA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/aboutyun/jdk </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$CLASSPATH:$JAVA_HOME/lib </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><h3 id="安装Scala"><a href="#安装Scala" class="headerlink" title="安装Scala"></a>安装Scala</h3><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp scala-2.11.12.tgz /usr/aboutyun</code></p></li><li><code>cd /usr/aboutyun</code></li><li><code>tar zxvf scala-2.11.12.tgz</code></li><li><code>rm -rf scala-2.11.12.tgz</code></li><li><code>mv scala-2.11.12 scala</code></li></ul><p><strong>#配置Scala环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET SCALA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/usr/aboutyun/scala </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$SCALA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><h3 id="安装miniconda3"><a href="#安装miniconda3" class="headerlink" title="安装miniconda3"></a>安装miniconda3</h3><ul><li><code>cd /mnt/hgfs/aboutyun</code></li><li><code>cp Miniconda3-latest-Linux-x86_64.sh /usr/local/src/</code></li><li><code>cd /usr/local/src</code></li><li><code>sudo yum -y install bzip2</code></li><li><code>sh Miniconda3-latest-Linux-x86_64.sh</code></li><li><code>rm -rf Miniconda3-latest-Linux-x86_64.sh</code></li></ul><p><strong>配置环境变量：</strong></p><ul><li><code>source ~/.bashrc</code></li></ul><p><strong>更新conda环境：</strong></p><ul><li><code>conda update --all</code></li></ul><h3 id="安装Zookeeper"><a href="#安装Zookeeper" class="headerlink" title="安装Zookeeper"></a>安装Zookeeper</h3><span class="label danger">仅在Slave节点</span><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp zookeeper-3.4.9.tar.gz /usr/aboutyun/</code></p></li><li><p><code>cd /usr/aboutyun/</code></p></li><li><p><code>tar zxvf zookeeper-3.4.9.tar.gz</code></p></li><li><p><code>rm -rf zookeeper-3.4.9.tar.gz</code></p></li><li><p><code>mv zookeeper-3.4.9 zookeeper</code></p></li><li><p><code>cd zookeeper</code></p></li></ul><p><strong>#配置Zookeeper环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET ZOOKEEPER PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZOOKEEPER_HOME</span>=/usr/aboutyun/zookeeper </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#修改Zookeeper配置</strong></p><ul><li><p><code>mkdir data</code></p></li><li><p><code>mkdir logs</code></p></li><li><p><code>cd conf</code></p></li><li><p><code>cp zoo_sample.cfg zoo.cfg</code></p></li><li><p><code>vim zoo.cfg</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataDir</span>=/usr/aboutyun/zookeeper/data </span><br><span class="line"><span class="attr">dataLogDir</span>=/usr/aboutyun/zookeeper/logs </span><br><span class="line"><span class="attr">server.1</span>=flink-slave1:<span class="number">2888</span>:<span class="number">3888</span> </span><br><span class="line"><span class="attr">server.2</span>=flink-slave2:<span class="number">2888</span>:<span class="number">3888</span> </span><br><span class="line"><span class="attr">server.3</span>=flink-slave3:<span class="number">2888</span>:<span class="number">3888</span></span><br></pre></td></tr></table></figure><p><strong>#分别添加ID</strong></p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#Slave1 </span></span><br><span class="line">echo <span class="string">"1"</span> &gt; <span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/zookeeper/</span>data/myid </span><br><span class="line"><span class="meta">#Slave2 </span></span><br><span class="line">echo <span class="string">"2"</span> &gt; <span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/zookeeper/</span>data/myid </span><br><span class="line"><span class="meta">#Slave3 </span></span><br><span class="line">echo <span class="string">"3"</span> &gt; <span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/zookeeper/</span>data/myid</span><br></pre></td></tr></table></figure><p><strong>#启动Zookeeper服务</strong></p><ul><li><code>zkServer.sh start</code></li></ul><p><strong>#查看运行状态</strong></p><ul><li><p><code>zkServer.sh status</code></p></li><li><p><code>jps</code></p></li></ul><p><strong>#关闭Zookeeper服务</strong></p><ul><li><code>zkServer.sh stop</code></li></ul><h3 id="安装Hadoop"><a href="#安装Hadoop" class="headerlink" title="安装Hadoop"></a>安装Hadoop</h3><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp hadoop-2.7.0.tar.gz /usr/aboutyun/</code></p></li><li><p><code>cd /usr/aboutyun/</code></p></li><li><p><code>tar zxvf hadoop-2.7.0.tar.gz</code></p></li><li><p><code>rm -rf hadoop-2.7.0.tar.gz</code></p></li><li><p><code>mv hadoop-2.7.0 hadoop</code></p></li><li><p><code>cd hadoop</code></p></li></ul><p><strong>#配置Hadoop环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET HADOOP PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/usr/aboutyun/hadoop</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/bin </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/sbin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_CONF_DIR</span>=<span class="variable">$HADOOP_HOME</span>/etc/hadoop</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#创建临时目录和文件目录</strong></p><ul><li><p><code>mkdir -p /usr/aboutyun/hadoop/dfs/name</code></p></li><li><p><code>mkdir -p /usr/aboutyun/hadoop/dfs/data</code></p></li><li><p><code>mkdir -p /usr/aboutyun/hadoop/tmp/dfs</code></p></li><li><code>mkdir -p /usr/aboutyun/hadoop/journal</code></li><li><code>mkdir -p /usr/aboutyun/hadoop/yarn/logs</code></li></ul><p><strong>#修改Hadoop配置文件</strong></p><ul><li><p><code>cd etc/hadoop</code></p></li><li><p><code>vim hadoop-env.sh</code></p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/aboutyun/jdk</span><br></pre></td></tr></table></figure><ul><li><code>vim yarn-env.sh</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/aboutyun/jdk</span><br></pre></td></tr></table></figure><ul><li><code>vim slaves</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flink-slave1 </span><br><span class="line">flink-slave2</span><br><span class="line">flink-slave3</span><br></pre></td></tr></table></figure><ul><li><code>vim core-site.xml</code></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;configuration&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>fs.defaultFS<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>hdfs:<span class="comment">//mycluster&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>默认文件系统的名称。一个URI，其方案和权限决定了FileSystem的实现。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>ha.zookeeper.quorum<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-slave1:<span class="number">2181</span>,flink-slave2:<span class="number">2181</span>,flink-slave3:<span class="number">2181</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>由逗号分隔的ZooKeeper服务器地址列表，由ZKFailoverController在自动故障转移中使用。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>hadoop.tmp.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hadoop/</span>tmp<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>数据目录目录<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.ha.fencing.methods<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>sshfence</span><br><span class="line">shell(<span class="meta-keyword">/bin/</span>true)<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>用于服务防护的防护方法列表。可能包含内置方法（例如shell和sshfence）或用户定义的方法。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.ha.fencing.ssh.private-key-files<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/home/</span>aboutyun/.ssh/id_rsa<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>用于内置sshfence fencer的SSH私钥文件。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>io.file.buffer.size<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">131072</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>SequenceFiles中使用的读/写缓冲区的大小。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>ipc.client.connect.max.retries<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">100</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>客户端为建立服务器连接而重试的次数。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>ipc.client.connect.retry.interval<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">10000</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>客户端在重试建立服务器连接之前将等待的毫秒数。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>vim hdfs-site.xml</code></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;configuration&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.nameservices<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>mycluster<span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.ha.namenodes.mycluster<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-master1,flink-master2<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>给定名称服务的前缀包含给定名称服务的逗号分隔的名称节点列表。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.rpc-address.mycluster.flink-master1<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-master1:<span class="number">8020</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.rpc-address.mycluster.flink-master2<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-master2:<span class="number">8020</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.http-address.mycluster.flink-master1<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-master1:<span class="number">50070</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.http-address.mycluster.flink-master2<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>flink-master2:<span class="number">50070</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.shared.edits.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>qjournal:<span class="comment">//flink-slave1:8485;flink-slave2:8485;flink-slave3:8485/mycluster&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>HA群集中多个名称节点之间的共享存储上的目录。此目录将由活动写入并由备用数据库读取，以保持命名空间同步。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.client.failover.proxy.provider.mycluster<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>配置Java类的名称，DFS客户端将使用该名称来确定哪个NameNode是当前的Active，以及哪个NameNode当前正在为客户端请求提供服务。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.ha.automatic-failover.enabled<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>true<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>是否启用自动故障转移。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.replication<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">3</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.permissions.enabled<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>false<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>如果为“true”，则启用HDFS中的权限检查。如果为“false”，则关闭权限检查，但所有其他行为都保持不变。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.journalnode.edits.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hadoop/</span>journal<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>指定JournalNode在本地磁盘存放数据的位置<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.name.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>file:<span class="comment">///usr/aboutyun/hadoop/dfs/name&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>设置namenode存放路径<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.datanode.data.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>file:<span class="comment">///usr/aboutyun/hadoop/dfs/data&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>设置datanode存放径路<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.blocksize<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">268435456</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>大型文件系统的HDFS块大小为<span class="number">256</span>MB。<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>dfs.namenode.handler.count<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">100</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>namenode的服务器线程数<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line"><span class="params">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>mv mapred-site.xml.template mapred-site.xml</code></p></li><li><p><code>vim mapred-site.xml</code></p></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;configuration&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.framework.name<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span>yarn<span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>指定mr框架为yarn方式<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.map.memory.mb<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">512</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">        <span class="params">&lt;description&gt;</span>每个Map任务的物理内存限制<span class="params">&lt;/description&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.reduce.memory.mb<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">512</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">        <span class="params">&lt;description&gt;</span>每个Reduce任务的物理内存限制<span class="params">&lt;/description&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.jobhistory.address<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">10020</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>MapReduce JobHistory服务器IPC主机：端口<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.jobhistory.webapp.address<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">19888</span><span class="params">&lt;/value&gt;</span></span><br><span class="line">        <span class="params">&lt;description&gt;</span>MapReduce JobHistory服务器Web浏览时的主机：端口<span class="params">&lt;/description&gt;</span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br><span class="line">    <span class="params">&lt;property&gt;</span></span><br><span class="line">        <span class="params">&lt;name&gt;</span>mapreduce.application.classpath<span class="params">&lt;/name&gt;</span></span><br><span class="line">        <span class="params">&lt;value&gt;</span></span><br><span class="line">          <span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hadoop/</span>etc/hadoop,</span><br><span class="line">          <span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hadoop/</span>share<span class="meta-keyword">/hadoop/</span>common<span class="comment">/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/common/lib/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/hdfs/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/hdfs/lib/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/mapreduce/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/mapreduce/lib/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/yarn/*,</span></span><br><span class="line"><span class="comment">          /usr/aboutyun/hadoop/share/hadoop/yarn/lib/*        </span></span><br><span class="line"><span class="comment">        &lt;/value&gt;</span></span><br><span class="line"><span class="comment">    &lt;/property&gt;</span></span><br><span class="line"><span class="comment">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>vim yarn-site.xml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.recovery.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>启动后启用RM以恢复状态。如果为true，则必须指定yarn.resourcemanager.store.class。<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.ha.automatic-failover.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.store.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>用作持久存储的类。<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.zk-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>flink-slave1:2181,flink-slave2:2181,flink-slave3:2181<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>ZooKeeper服务的地址，多个地址使用逗号隔开<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.ha.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>启用RM高可用性。启用时，（1）默认情况下，RM以待机模式启动，并在提示时转换为活动模式。（2）RM集合中的节点列在yarn.resourcemanager.ha.rm-ids中（3）如果明确指定了yarn.resourcemanager.ha.id，则每个RM的id来自yarn.resourcemanager.ha.id或者可以通过匹配yarn.resourcemanager.address。<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.ha.rm-ids<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>rm1,rm2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>启用HA时群集中的RM节点列表。最少2个<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address.rm1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>flink-master1:8088<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address.rm2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>flink-master2:8088<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.cluster-id<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mycluster-yarn-ha<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>集群HA的id，用于在ZooKeeper上创建节点，区分使用同一个ZooKeeper集群的不同Hadoop集群<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname.rm1<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>flink-master1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>主机名<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname.rm2<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>flink-master2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>主机名<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>reducer取数据的方式是mapreduce_shuffle<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.resource.memory-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2048<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>每个节点可用内存,单位MB<span class="tag">&lt;/<span class="name">discription</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.resource.cpu-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>每个节点可用cpu<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>512<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>单个任务可申请最少内存，默认1024MB<span class="tag">&lt;/<span class="name">discription</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.maximum-allocation-mb<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1024<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>单个任务可申请最大内存，默认8192MB<span class="tag">&lt;/<span class="name">discription</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>最小的cores 1 个，默认的就是一个<span class="tag">&lt;/<span class="name">discription</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.scheduler.minimum-allocation-vcores<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>最多可分配的cores 2 个<span class="tag">&lt;/<span class="name">discription</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.pmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.vmem-check-enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>是否开启聚合日志<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>定义NM唤醒上载日志文件的频率。默认值为-1。默认情况下，应用程序完成后将上载日志。通过设置此配置，可以在应用程序运行时定期上载日志。可设置的最小滚动间隔秒数为3600。<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://flink-master1:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span> 配置日志服务器的地址<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>-1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span> 在删除聚合日志之前保留多长时间。-1禁用。单位是秒<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/aboutyun/hadoop/yarn/logs/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>nodemanager存放container日志的本地路径<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.remote-app-log-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/tmp/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">discription</span>&gt;</span>nodemanager存放container日志的本地路径<span class="tag">&lt;/<span class="name">discription</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.am.max-attempts<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>4<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">description</span>&gt;</span>The maximum number of application master execution attempts.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>cd /usr/aboutyun/hadoop/sbin</code></li></ul><p><strong>#编辑 start-dfs.sh，stop-dfs.sh 脚本</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在开始处 #!/usr/bin/env bash 的下面，增加以下内容：</span></span><br><span class="line"><span class="attr">HDFS_DATANODE_USER</span>=root</span><br><span class="line"><span class="attr">HDFS_DATANODE_SECURE_USER</span>=hdfs</span><br><span class="line"><span class="attr">HDFS_ZKFC_USER</span>=root</span><br><span class="line"><span class="attr">HDFS_JOURNALNODE_USER</span>=root</span><br><span class="line"><span class="attr">HDFS_NAMENODE_USER</span>=root</span><br><span class="line"><span class="attr">HDFS_SECONDARYNAMENODE_USER</span>=root</span><br></pre></td></tr></table></figure><p><strong>#编辑 start-yarn.sh，stop-yarn.sh 脚本</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在开始处 #!/usr/bin/env bash 的下面，增加以下内容：</span></span><br><span class="line"><span class="attr">YARN_RESOURCEMANAGER_USER</span>=root</span><br><span class="line"><span class="attr">HADOOP_SECURE_DN_USER</span>=yarn </span><br><span class="line"><span class="attr">YARN_NODEMANAGER_USER</span>=root</span><br></pre></td></tr></table></figure><p><strong>#启用JournalNode集群</strong></p><ul><li><code>hadoop-daemon.sh start journalnode</code></li></ul><p><strong>#初始化NameNode(仅master1)</strong></p><ul><li><code>hadoop namenode -format</code></li></ul><p><strong>#格式化Zookeeper(仅master1)</strong></p><ul><li><code>hdfs zkfc -formatZK</code></li></ul><p><strong>#启动NameNode(仅master1)</strong></p><ul><li><code>hadoop-daemon.sh start namenode</code></li></ul><p><strong>#将 NameNode 数据复制到备用 NameNode(仅master2)</strong></p><ul><li><code>hdfs namenode -bootstrapStandby</code></li><li><code>hadoop-daemon.sh start namenode</code></li></ul><p><strong>#启动Hadoop集群</strong></p><ul><li><p><code>start-dfs.sh</code>(仅master1)</p></li><li><p><code>start-yarn.sh</code>(仅master1)</p></li><li><p><code>yarn-daemon.sh start resourcemanager</code>(仅master2)</p></li></ul><p><strong>#监控页面</strong></p><ul><li><a href="http://flink-master1:50070/" target="_blank" rel="noopener">HDFS(master1)</a></li><li><a href="http://flink-master2:50070/" target="_blank" rel="noopener">HDFS(master2)</a></li><li><a href="http://flink-master1:8088/" target="_blank" rel="noopener">YARN(master1)</a></li><li><a href="http://flink-master1:8088/" target="_blank" rel="noopener">YARN(master2)</a></li></ul><h3 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h3><span class="label danger">仅在Master节点</span><p><strong>#安装mysql</strong></p><ul><li><p><code>yum -y install mariadb-server mariadb</code></p></li><li><p><code>rpm -q mariadb mariadb-server</code></p></li></ul><p><strong>#设置mysql开机启动</strong></p><ul><li><p><code>systemctl enable mariadb</code></p></li><li><p><code>systemctl daemon-reload</code></p></li></ul><p><strong>#开启mysql</strong></p><ul><li><code>systemctl start mariadb</code></li></ul><p><strong>#关闭mysql</strong></p><ul><li><code>systemctl stop mariadb</code></li></ul><p><strong>#重启mysql</strong></p><ul><li><code>systemctl restart mariadb</code></li></ul><p><strong>#查看mysql状态</strong></p><ul><li><code>systemctl status mariadb</code></li></ul><p><strong>#通过内置的安全脚本实现对数据库的安全保护</strong></p><ul><li><code>mysql_secure_installation</code></li></ul><p><strong>#登录root账户</strong></p><ul><li><code>mysql -uroot -p</code></li></ul><p><strong>#创建账户</strong></p><ul><li><code>CREATE DATABASE metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</code></li><li><code>GRANT ALL ON metastore.* TO &#39;hive&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</code></li></ul><p><strong>#刷新权限</strong></p><ul><li><code>flush privileges;</code></li></ul><h3 id="安装Hive"><a href="#安装Hive" class="headerlink" title="安装Hive"></a>安装Hive</h3><span class="label danger">仅在Master节点</span><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp apache-hive-2.2.0-bin.tar.gz /usr/aboutyun/</code></p></li><li><p><code>cd /usr/aboutyun/</code></p></li><li><p><code>tar zxvf apache-hive-2.2.0-bin.tar.gz</code></p></li><li><p><code>rm -rf apache-hive-2.2.0-bin.tar.gz</code></p></li><li><code>mv apache-hive-2.2.0-bin hive</code></li></ul><p><strong>#配置Hive环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET Hive PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HIVE_HOME</span>=/usr/aboutyun/hive </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#配置mysql驱动包</strong></p><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp mysql-connector-java-5.1.47.tar.gz /usr/aboutyun/</code></p></li><li><p><code>cd /usr/aboutyun/</code></p></li><li><p><code>tar zxvf mysql-connector-java-5.1.47.tar.gz</code></p></li><li><p><code>rm -rf mysql-connector-java-5.1.47.tar.gz</code></p></li><li><p><code>cp mysql-connector-java-5.1.47-bin.jar /usr/aboutyun/hive/lib/</code></p></li></ul><p><strong>#更换jline包（版本不一致）</strong></p><ul><li><code>cp hive/lib/jline-2.12.jar /usr/aboutyun/hadoop/share/hadoop/yarn/lib/</code></li></ul><p><strong>#配置hive</strong></p><ul><li><p><code>cd hive</code></p></li><li><p><code>mkdir -p data/hive/log</code></p></li><li><p><code>mkdir -p data/hive/tmp</code></p></li><li><p><code>mkdir -p data/hive/warehouse</code></p></li><li><p><code>cd conf</code></p></li><li><p><code>cp hive-env.sh.template hive-env.sh</code></p></li><li><p><code>vim hive-env.sh</code></p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/aboutyun/jdk </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/usr/aboutyun/hadoop </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HIVE_HOME</span>=/usr/aboutyun/hive </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HIVE_CONF_DIR</span>=/usr/aboutyun/hive/conf </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HIVE_AUX_JARS</span>=/usr/aboutyun/hive/lib</span><br></pre></td></tr></table></figure><ul><li><p><code>cp hive-default.xml.template hive-site.xml</code></p></li><li><p><code>vim hive-site.xml</code></p></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;configuration&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionURL<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span>jdbc:mysql:<span class="comment">//localhost:3306/hive?createDatabaseIfNotExist=true&amp;amp;useSSL=false&lt;/value&gt; </span></span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionDriverName<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span>com.mysql.jdbc.Driver<span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionUserName<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span>hive<span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionPassword<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span><span class="number">123</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>hive.metastore.warehouse.dir<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hive/</span>data<span class="meta-keyword">/hive/</span>warehouse<span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>hive.exec.scratchdir<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hive/</span>data<span class="meta-keyword">/hive/</span>tmp<span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;property&gt;</span> </span><br><span class="line"><span class="params">&lt;name&gt;</span>hive.querylog.location<span class="params">&lt;/name&gt;</span> </span><br><span class="line"><span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>aboutyun<span class="meta-keyword">/hive/</span>data<span class="meta-keyword">/hive/</span>log<span class="params">&lt;/value&gt;</span> </span><br><span class="line"><span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><p>把{system:java.io.tmpdir} 改成 /usr/aboutyun/hive/data/hive/tmp</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/$&#123;system<span class="function">:java.io.tmpdir</span>&#125;/\<span class="string">/usr</span>\<span class="string">/aboutyun</span>\<span class="string">/hive</span>\<span class="string">/data</span>\<span class="string">/hive</span>\<span class="string">/tmp/g</span></span><br></pre></td></tr></table></figure><p>把 {system:user.name} 改成 {user.name}</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:%s/</span><span class="variable">$&#123;</span><span class="symbol">system:</span>user.name&#125;/aboutyun/g</span><br></pre></td></tr></table></figure><p><strong>#初始化hive(MYSQL版)</strong></p><ul><li><code>schematool -dbType mysql -initSchema</code></li></ul><h3 id="安装Flume"><a href="#安装Flume" class="headerlink" title="安装Flume"></a>安装Flume</h3><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp apache-flume-1.9.0-bin.tar.gz /usr/aboutyun/</code></p></li><li><p><code>cd /usr/aboutyun/</code></p></li><li><p><code>tar zxvf apache-flume-1.9.0-bin.tar.gz</code></p></li><li><p><code>rm -rf apache-flume-1.9.0-bin.tar.gz</code></p></li><li><p><code>mv apache-flume-1.9.0-bin flume</code></p></li><li><p><code>cd flume</code></p></li></ul><p><strong>#Hbase环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET FLUME PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">FLUME_HOME</span>=/usr/aboutyun/flume </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$FLUME_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#修改Flume配置</strong></p><ul><li><p><code>cd conf</code></p></li><li><p><code>cp flume-env.sh.template flume-env.sh</code></p></li><li><p><code>vim flume-env.sh</code></p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/aboutyun/jdk</span><br></pre></td></tr></table></figure><p><strong>#验证</strong></p><p><strong>Server</strong></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># NetCat </span><br><span class="line">flume-ng agent --<span class="keyword">conf</span> <span class="keyword">conf</span> --<span class="keyword">conf</span>-<span class="keyword">file</span> <span class="keyword">conf</span>/flume-netcat.<span class="keyword">conf</span> --name=agent -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"># Exec </span><br><span class="line">flume-ng agent --<span class="keyword">conf</span> <span class="keyword">conf</span> --<span class="keyword">conf</span>-<span class="keyword">file</span> <span class="keyword">conf</span>/flume-exec.<span class="keyword">conf</span> --name=agent -Dflume.root.logger=INFO,console</span><br><span class="line"></span><br><span class="line"># Avro </span><br><span class="line">flume-ng agent --<span class="keyword">conf</span> <span class="keyword">conf</span> --<span class="keyword">conf</span>-<span class="keyword">file</span> <span class="keyword">conf</span>/flume-netcat.<span class="keyword">conf</span> --name=agent -Dflume.root.logger=DEBUG,console</span><br></pre></td></tr></table></figure><p><strong>Client</strong></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># NetCat </span></span><br><span class="line">flume-ng agent --conf conf --conf-file conf/flume-netcat.conf <span class="attribute">--name</span>=agent -Dflume.root.<span class="attribute">logger</span>=INFO,console</span><br><span class="line"></span><br><span class="line"><span class="comment"># Exec </span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>;<span class="keyword">do</span> echo `date` &gt;&gt; /data/hadoop/flume/test.txt ; sleep 1; done</span><br><span class="line"></span><br><span class="line"><span class="comment"># Avro </span></span><br><span class="line">telnet master 44444</span><br></pre></td></tr></table></figure><h3 id="安装Kafka"><a href="#安装Kafka" class="headerlink" title="安装Kafka"></a>安装Kafka</h3><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp kafka_2.11-0.11.0.3.tgz /usr/aboutyun</code></p></li><li><p><code>cd /usr/aboutyun</code></p></li><li><p><code>tar zxvf kafka_2.11-0.11.0.3.tgz</code></p></li><li><p><code>rm -rf kafka_2.11-0.11.0.3.tgz</code></p></li><li><p><code>mv kafka_2.11-0.11.0.3 kafka</code></p></li><li><p><code>cd kafka</code></p></li></ul><p><strong>#Kafka环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET KAFKA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">KAFKA_HOME</span>=/usr/aboutyun/kafka </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$KAFKA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#修改Kafka配置</strong></p><ul><li><p><code>mkdir logs</code></p></li><li><p><code>cd config</code></p></li><li><p><code>vim server.properties</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">log.dirs</span>=/usr/aboutyun/kafka/logs </span><br><span class="line"><span class="attr">zookeeper.connect</span>=flink-slave1:<span class="number">2181</span>,flink-slave2:<span class="number">2181</span>,flink-slave3:<span class="number">2181</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#Master1 </span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="number">0</span></span><br><span class="line"><span class="comment">#Master2 </span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="number">1</span></span><br><span class="line"><span class="comment">#Slave1 </span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="number">2</span> </span><br><span class="line"><span class="comment">#Slave2 </span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="number">3</span></span><br><span class="line"><span class="comment">#Slave3 </span></span><br><span class="line"><span class="attr">broker.id</span>=<span class="number">4</span></span><br></pre></td></tr></table></figure><p><strong>普通启动：</strong></p><ul><li><code>kafka-server-start.sh -daemon /usr/aboutyun/kafka/config/server.properties</code></li></ul><p><strong>关闭集群：</strong></p><ul><li><code>kafka-server-stop.sh</code></li></ul><h3 id="安装Flink"><a href="#安装Flink" class="headerlink" title="安装Flink"></a>安装Flink</h3><ul><li><p><code>cd /mnt/hgfs/aboutyun</code></p></li><li><p><code>cp flink-1.7.2-bin-hadoop27-scala_2.11.tgz /usr/aboutyun</code></p></li><li><p><code>cd /usr/aboutyun</code></p></li><li><p><code>tar zxvf flink-1.7.2-bin-hadoop27-scala_2.11.tgz</code></p></li><li><p><code>rm -rf flink-1.7.2-bin-hadoop27-scala_2.11.tgz</code></p></li><li><p><code>mv flink-1.7.2 flink</code></p></li><li><p><code>cd flink</code></p></li></ul><p><strong>#Flink环境变量</strong></p><ul><li><code>vim /etc/profile</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET FLINK PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">FLINK_HOME</span>=/usr/aboutyun/flink </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$FLINK_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><p><strong>#修改Flink配置</strong></p><p><code>cd conf</code></p><ul><li><code>vim flink-conf.yaml</code></li></ul><figure class="highlight ldif"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改如下内容</span></span><br><span class="line"><span class="attribute">jobmanager.rpc.address</span>: flink-master1</span><br><span class="line"><span class="attribute">high-availability</span>: zookeeper</span><br><span class="line"><span class="attribute">high-availability.zookeeper.path.root</span>: /flink</span><br><span class="line"><span class="attribute">high-availability.cluster-id</span>: flink</span><br><span class="line"><span class="attribute">high-availability.storageDir</span>: hdfs:///flink/ha/</span><br><span class="line"><span class="attribute">high-availability.zookeeper.quorum</span>: flink-slave1:2181,flink-slave2:2181,flink-slave3:2181</span><br><span class="line"><span class="attribute">yarn.application-attempts</span>: 10</span><br></pre></td></tr></table></figure><ul><li><code>vim masters</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">flink-master1</span><span class="selector-pseudo">:8081</span></span><br><span class="line"><span class="selector-tag">flink-master2</span><span class="selector-pseudo">:8081</span></span><br></pre></td></tr></table></figure><ul><li><code>vim slaves</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flink-slave1 </span><br><span class="line">flink-slave2</span><br><span class="line">flink-slave3</span><br></pre></td></tr></table></figure><p><strong>#启动Standalone集群HA</strong></p><ul><li><code>start-cluster.sh</code></li></ul><p><strong>#关闭Standalone集群</strong></p><ul><li><code>stop-cluster.sh</code></li></ul><p><strong>#启动YARN集群HA</strong></p><ul><li><code>yarn-session.sh</code></li></ul><p><strong>#监控网页</strong></p><p><a href="http://flink-master1:8081/" target="_blank" rel="noopener">Flink(master1)</a></p><p><br></p><p><meting-js id="472361096" server="netease" type="song" preload="none"><br></meting-js></p><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://blogs.kainy.cn/2013/06/通行证项目前端开发小结/">通行证项目前端开发小结</a></li><li><a href="https://blogs.kainy.cn/2013/04/拾贝电台开源了/">拾贝电台开源了</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Flink项目环境搭建&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/045237.jpg&quot; alt=&quot;janko-ferlic-214224-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="项目实战" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
      <category term="Flink电商团购" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/Flink%E7%94%B5%E5%95%86%E5%9B%A2%E8%B4%AD/"/>
    
      <category term="01-大数据集群搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/Flink%E7%94%B5%E5%95%86%E5%9B%A2%E8%B4%AD/01-%E5%A4%A7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Flink" scheme="https://alessa0.cn/tags/Flink/"/>
    
      <category term="项目" scheme="https://alessa0.cn/tags/%E9%A1%B9%E7%9B%AE/"/>
    
      <category term="电商" scheme="https://alessa0.cn/tags/%E7%94%B5%E5%95%86/"/>
    
  </entry>
  
  <entry>
    <title>傻瓜式CDH集群部署指南</title>
    <link href="https://alessa0.cn/posts/5578f504/"/>
    <id>https://alessa0.cn/posts/5578f504/</id>
    <published>2019-05-17T06:40:59.000Z</published>
    <updated>2019-07-17T09:48:22.140Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">CDH环境配置</p><br><img src="https://image.alessa0.cn/074403.jpg" alt="clay-banks-1554989-unsplash"><a id="more"></a><p></p><blockquote class="blockquote-center"><p>单机内存最低8G</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://www.cloudera.com/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Cloudera</a></div><p></p><h1 id="集群环境"><a href="#集群环境" class="headerlink" title="集群环境"></a>集群环境</h1><h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><p>CentOS-7-x86_64-Minimal-1810.iso</p><ul><li><strong>cdh-master</strong> 192.168.69.111 <strong>4core</strong> <strong>16G</strong></li><li><strong>cdh-slave1</strong> 192.168.69.112 <strong>4core</strong> <strong>8G</strong></li><li><strong>cdh-slave2</strong> 192.168.69.113 <strong>4core</strong> <strong>8G</strong></li></ul><h1 id="关闭防火墙及修改hosts"><a href="#关闭防火墙及修改hosts" class="headerlink" title="关闭防火墙及修改hosts"></a>关闭防火墙及修改hosts</h1><h2 id="永久关闭内核防火墙"><a href="#永久关闭内核防火墙" class="headerlink" title="永久关闭内核防火墙"></a>永久关闭内核防火墙</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/selinux/config]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下信息</span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure><h2 id="关闭系统防火墙"><a href="#关闭系统防火墙" class="headerlink" title="关闭系统防火墙"></a>关闭系统防火墙</h2><h3 id="停止firewall"><a href="#停止firewall" class="headerlink" title="停止firewall"></a>停止firewall</h3><ul><li><code>systemctl stop firewalld.service</code></li></ul><h3 id="禁止firewall开机启动"><a href="#禁止firewall开机启动" class="headerlink" title="禁止firewall开机启动"></a>禁止firewall开机启动</h3><ul><li><code>systemctl disable firewalld.service</code></li></ul><h2 id="修改hosts文件"><a href="#修改hosts文件" class="headerlink" title="修改hosts文件"></a>修改hosts文件</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/hosts]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line">192.168.69.111 cdh-master </span><br><span class="line">192.168.69.112 cdh-slave1 </span><br><span class="line">192.168.69.113 cdh-slave2</span><br></pre></td></tr></table></figure><h1 id="SSH互信"><a href="#SSH互信" class="headerlink" title="SSH互信"></a>SSH互信</h1><h2 id="生成密钥对（公钥和私钥）"><a href="#生成密钥对（公钥和私钥）" class="headerlink" title="生成密钥对（公钥和私钥）"></a>生成密钥对（公钥和私钥）</h2><ul><li><code>ssh-keygen -t rsa -P &#39;&#39;</code></li></ul><h2 id="追加authorized-keys"><a href="#追加authorized-keys" class="headerlink" title="追加authorized_keys"></a>追加authorized_keys</h2><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 追加authorized_keys</span></span><br><span class="line">cat ~<span class="string">/.ssh/id_rsa.pub</span> &gt; ~<span class="string">/.ssh/authorized_keys</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改权限</span></span><br><span class="line">chmod g-w ~</span><br><span class="line">chmod 700 ~<span class="string">/.ssh</span> </span><br><span class="line">chmod 600 ~<span class="string">/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure><h2 id="追加密钥到Master"><a href="#追加密钥到Master" class="headerlink" title="追加密钥到Master"></a>追加密钥到Master</h2><ul><li><code>ssh cdh-slave1 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></li><li><code>ssh cdh-slave2 cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></li></ul><h2 id="复制密钥到从节点"><a href="#复制密钥到从节点" class="headerlink" title="复制密钥到从节点"></a>复制密钥到从节点</h2><ul><li><code>scp ~/.ssh/authorized_keys cdh-slave1:~/.ssh/authorized_keys</code></li><li><code>scp ~/.ssh/authorized_keys cdh-slave2:~/.ssh/authorized_keys</code></li></ul><h1 id="ntp时间同步"><a href="#ntp时间同步" class="headerlink" title="ntp时间同步"></a>ntp时间同步</h1><h2 id="所有节点安装相关ntp组件"><a href="#所有节点安装相关ntp组件" class="headerlink" title="所有节点安装相关ntp组件"></a>所有节点安装相关ntp组件</h2><ul><li><code>yum -y install ntp</code></li></ul><h2 id="所有节点设置时区"><a href="#所有节点设置时区" class="headerlink" title="所有节点设置时区"></a>所有节点设置时区</h2><ul><li><code>timedatectl set-timezone Asia/Shanghai</code></li></ul><h2 id="启动ntp，以及设置开机启动"><a href="#启动ntp，以及设置开机启动" class="headerlink" title="启动ntp，以及设置开机启动"></a>启动ntp，以及设置开机启动</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动ntp</span></span><br><span class="line">systemctl start ntpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机启动</span></span><br><span class="line">systemctl <span class="builtin-name">enable</span> ntpd</span><br></pre></td></tr></table></figure><h2 id="配置ntp服务器-master节点"><a href="#配置ntp服务器-master节点" class="headerlink" title="配置ntp服务器(master节点)"></a>配置ntp服务器(master节点)</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/ntp.conf]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下几行</span><br><span class="line">#server 0.centos.pool.ntp.org iburst</span><br><span class="line">#server 1.centos.pool.ntp.org iburst</span><br><span class="line">#server 2.centos.pool.ntp.org iburst</span><br><span class="line">#server 3.centos.pool.ntp.org iburst</span><br><span class="line"></span><br><span class="line"># 添加如下几行</span><br><span class="line">restrict 192.168.69.2 mask 255.255.255.0 nomodify notrap</span><br><span class="line">server 127.127.1.0</span><br><span class="line">fudge 127.127.1.0 stratum 10</span><br></pre></td></tr></table></figure><h2 id="配置ntp服务器-slave节点"><a href="#配置ntp服务器-slave节点" class="headerlink" title="配置ntp服务器(slave节点)"></a>配置ntp服务器(slave节点)</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/ntp.conf]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下几行</span><br><span class="line">#server 0.centos.pool.ntp.org iburst</span><br><span class="line">#server 1.centos.pool.ntp.org iburst</span><br><span class="line">#server 2.centos.pool.ntp.org iburst</span><br><span class="line">#server 3.centos.pool.ntp.org iburst</span><br><span class="line"></span><br><span class="line"># 添加如下几行(master节点)</span><br><span class="line">restrict 192.168.69.2 mask 255.255.255.0 nomodify notrap</span><br><span class="line">server 192.168.69.111</span><br></pre></td></tr></table></figure><h2 id="重启ntp服务"><a href="#重启ntp服务" class="headerlink" title="重启ntp服务"></a>重启ntp服务</h2><ul><li><code>systemctl restart ntpd</code></li></ul><h2 id="主节点定时服务"><a href="#主节点定时服务" class="headerlink" title="主节点定时服务"></a>主节点定时服务</h2><figure class="highlight plain"><figcaption><span>[crontab -e]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0-59/10 * * * * /usr/sbin/ntpdate -u asia.pool.ntp.org</span><br></pre></td></tr></table></figure><h2 id="手动同步master的时间"><a href="#手动同步master的时间" class="headerlink" title="手动同步master的时间"></a>手动同步master的时间</h2><ul><li><code>ntpdate -u 192.168.69.111</code></li></ul><h2 id="查看同步状态"><a href="#查看同步状态" class="headerlink" title="查看同步状态"></a>查看同步状态</h2><ul><li><code>ntpstat</code></li></ul><h1 id="配置Cloudera-rpm仓库"><a href="#配置Cloudera-rpm仓库" class="headerlink" title="配置Cloudera rpm仓库"></a>配置Cloudera rpm仓库</h1><h2 id="下载repo文件"><a href="#下载repo文件" class="headerlink" title="下载repo文件"></a>下载repo文件</h2><ul><li><code>sudo wget https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/cloudera-manager.repo -P /etc/yum.repos.d/</code></li></ul><h2 id="使用GPG-key导入仓库"><a href="#使用GPG-key导入仓库" class="headerlink" title="使用GPG key导入仓库"></a>使用GPG key导入仓库</h2><ul><li><code>sudo rpm --import https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/RPM-GPG-KEY-cloudera</code></li></ul><h2 id="下载parcel文件"><a href="#下载parcel文件" class="headerlink" title="下载parcel文件"></a>下载parcel文件</h2><ul><li><code>mkdir -p /opt/cloudera/parcel-repo/</code></li><li><code>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel /opt/cloudera/parcel-repo/</code></li><li><code>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/CDH-6.2.0-1.cdh6.2.0.p0.967373-el7.parcel.sha256 /opt/cloudera/parcel-repo/</code></li><li><code>sudo wget https://archive.cloudera.com/cdh6/6.2.0/parcels/manifest.json /opt/cloudera/parcel-repo/</code></li></ul><h1 id="安装-Java（64-bit）"><a href="#安装-Java（64-bit）" class="headerlink" title="安装 Java（64-bit）"></a>安装 Java（64-bit）</h1><h2 id="卸载掉自带的-OpenJdk"><a href="#卸载掉自带的-OpenJdk" class="headerlink" title="卸载掉自带的 OpenJdk"></a>卸载掉自带的 OpenJdk</h2><ul><li><code>rpm -qa | grep java</code></li></ul><h2 id="使用Cloudera-Manager-安装-Java"><a href="#使用Cloudera-Manager-安装-Java" class="headerlink" title="使用Cloudera Manager 安装 Java"></a>使用Cloudera Manager 安装 Java</h2><ul><li><code>sudo yum -y install oracle-j2sdk1.8</code></li></ul><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/profile]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># SET JAVA PATH </span><br><span class="line">export JAVA_HOME=/usr/java/jdk1.8.0_181-cloudera/</span><br><span class="line">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib </span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source /etc/profile</code></li></ul><h3 id="yum-update报错Error-Delta-RPMs-disabled-because-usr-bin-applydeltarpm-not-installed"><a href="#yum-update报错Error-Delta-RPMs-disabled-because-usr-bin-applydeltarpm-not-installed" class="headerlink" title="yum update报错Error: Delta RPMs disabled because /usr/bin/applydeltarpm not installed."></a>yum update报错<code>Error: Delta RPMs disabled because /usr/bin/applydeltarpm not installed.</code></h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装deltarpm</span></span><br><span class="line"><span class="attribute">yum</span> provides <span class="string">'*/applydeltarpm'</span></span><br><span class="line">yum install deltarpm</span><br></pre></td></tr></table></figure><h1 id="安装Cloudera-Manager-Server"><a href="#安装Cloudera-Manager-Server" class="headerlink" title="安装Cloudera Manager Server"></a>安装Cloudera Manager Server</h1><h2 id="安装Cloudera-Manager包"><a href="#安装Cloudera-Manager包" class="headerlink" title="安装Cloudera Manager包"></a>安装Cloudera Manager包</h2><ul><li><code>sudo yum -y install cloudera-manager-daemons cloudera-manager-agent cloudera-manager-server</code></li></ul><p>Ps：可以在<a href="https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/RPMS/x86_64/" target="_blank" rel="noopener">https://archive.cloudera.com/cm6/6.2.0/redhat7/yum/RPMS/x86_64/</a> 提前下好rpm包进行安装。</p><h2 id="启用Auto-TLS"><a href="#启用Auto-TLS" class="headerlink" title="启用Auto-TLS"></a>启用Auto-TLS</h2><p>待续</p><h1 id="安装和配置数据库MariaDB-for-Cloudera-Software-master节点"><a href="#安装和配置数据库MariaDB-for-Cloudera-Software-master节点" class="headerlink" title="安装和配置数据库MariaDB for Cloudera Software(master节点)"></a>安装和配置数据库MariaDB for Cloudera Software(master节点)</h1><h2 id="安装MariaDB"><a href="#安装MariaDB" class="headerlink" title="安装MariaDB"></a>安装MariaDB</h2><ul><li><code>sudo yum -y install mariadb-server</code></li></ul><h2 id="配置MariaDB"><a href="#配置MariaDB" class="headerlink" title="配置MariaDB"></a>配置MariaDB</h2><figure class="highlight plain"><figcaption><span>[vim</span><a href="/etc/my.cnf]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">datadir=/var/lib/mysql</span><br><span class="line">socket=/var/lib/mysql/mysql.sock</span><br><span class="line">transaction-isolation = READ-COMMITTED</span><br><span class="line"># Disabling symbolic-links is recommended to prevent assorted security risks;</span><br><span class="line"># to do so, uncomment this line:</span><br><span class="line">symbolic-links = 0</span><br><span class="line"># Settings user and group are ignored when systemd is used.</span><br><span class="line"># If you need to run mysqld under a different user or group,</span><br><span class="line"># customize your systemd unit file for mariadb according to the</span><br><span class="line"># instructions in http://fedoraproject.org/wiki/Systemd</span><br><span class="line"></span><br><span class="line">key_buffer = 16M</span><br><span class="line">key_buffer_size = 32M</span><br><span class="line">max_allowed_packet = 32M</span><br><span class="line">thread_stack = 256K</span><br><span class="line">thread_cache_size = 64</span><br><span class="line">query_cache_limit = 8M</span><br><span class="line">query_cache_size = 64M</span><br><span class="line">query_cache_type = 1</span><br><span class="line"></span><br><span class="line">max_connections = 550</span><br><span class="line">#expire_logs_days = 10</span><br><span class="line">#max_binlog_size = 100M</span><br><span class="line"></span><br><span class="line">#log_bin should be on a disk with enough free space.</span><br><span class="line">#Replace &apos;/var/lib/mysql/mysql_binary_log&apos; with an appropriate path for your</span><br><span class="line">#system and chown the specified folder to the mysql user.</span><br><span class="line">log_bin=/var/lib/mysql/mysql_binary_log</span><br><span class="line"></span><br><span class="line">#In later versions of MariaDB, if you enable the binary log and do not set</span><br><span class="line">#a server_id, MariaDB will not start. The server_id must be unique within</span><br><span class="line">#the replicating group.</span><br><span class="line">server_id=1</span><br><span class="line"></span><br><span class="line">binlog_format = mixed</span><br><span class="line"></span><br><span class="line">read_buffer_size = 2M</span><br><span class="line">read_rnd_buffer_size = 16M</span><br><span class="line">sort_buffer_size = 8M</span><br><span class="line">join_buffer_size = 8M</span><br><span class="line"></span><br><span class="line"># InnoDB settings</span><br><span class="line">innodb_file_per_table = 1</span><br><span class="line">innodb_flush_log_at_trx_commit  = 2</span><br><span class="line">innodb_log_buffer_size = 64M</span><br><span class="line">innodb_buffer_pool_size = 4G</span><br><span class="line">innodb_thread_concurrency = 8</span><br><span class="line">innodb_flush_method = O_DIRECT</span><br><span class="line">innodb_log_file_size = 512M</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error=/var/log/mariadb/mariadb.log</span><br><span class="line">pid-file=/var/run/mariadb/mariadb.pid</span><br><span class="line"></span><br><span class="line">#</span><br><span class="line"># include all files from the config directory</span><br><span class="line">#</span><br><span class="line">!includedir /etc/my.cnf.d</span><br></pre></td></tr></table></figure><h2 id="启动MariaDB"><a href="#启动MariaDB" class="headerlink" title="启动MariaDB"></a>启动MariaDB</h2><h3 id="开机启动MariaDB"><a href="#开机启动MariaDB" class="headerlink" title="开机启动MariaDB"></a>开机启动MariaDB</h3><ul><li><code>sudo systemctl enable mariadb</code></li></ul><h3 id="启动MariaDB服务"><a href="#启动MariaDB服务" class="headerlink" title="启动MariaDB服务"></a>启动MariaDB服务</h3><ul><li><code>sudo systemctl start mariadb</code></li></ul><h2 id="安全设置"><a href="#安全设置" class="headerlink" title="安全设置"></a>安全设置</h2><figure class="highlight plain"><figcaption><span>[sudo</span><a href="/usr/bin/mysql_secure_installation]">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line">[...]</span><br><span class="line">Set root password? [Y/n] Y</span><br><span class="line">New password: 123</span><br><span class="line">Re-enter new password: 123</span><br><span class="line">[...]</span><br><span class="line">Remove anonymous users? [Y/n] Y</span><br><span class="line">[...]</span><br><span class="line">Disallow root login remotely? [Y/n] Y</span><br><span class="line">[...]</span><br><span class="line">Remove test database and access to it [Y/n] Y</span><br><span class="line">[...]</span><br><span class="line">Reload privilege tables now? [Y/n] Y</span><br><span class="line">[...]</span><br><span class="line">All done!  If you&apos;ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MariaDB!</span><br></pre></td></tr></table></figure><h2 id="安装MySQL-JDBC-Driver-for-MariaDB"><a href="#安装MySQL-JDBC-Driver-for-MariaDB" class="headerlink" title="安装MySQL JDBC Driver for MariaDB"></a>安装MySQL JDBC Driver for MariaDB</h2><h3 id="下载驱动包"><a href="#下载驱动包" class="headerlink" title="下载驱动包"></a>下载驱动包</h3><ul><li><code>wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz</code></li></ul><h3 id="解压驱动包"><a href="#解压驱动包" class="headerlink" title="解压驱动包"></a>解压驱动包</h3><ul><li><code>tar zxvf mysql-connector-java-5.1.46.tar.gz</code></li><li><code>rm -rf mysql-connector-java-5.1.46.tar.gz</code></li></ul><h3 id="复制驱动包"><a href="#复制驱动包" class="headerlink" title="复制驱动包"></a>复制驱动包</h3><ul><li><code>sudo mkdir -p /usr/share/java/</code></li><li><code>cd mysql-connector-java-5.1.46</code></li><li><code>sudo cp mysql-connector-java-5.1.46-bin.jar /usr/share/java/mysql-connector-java.jar</code></li></ul><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><h3 id="登录root账户"><a href="#登录root账户" class="headerlink" title="登录root账户"></a>登录root账户</h3><ul><li><code>mysql -uroot -p</code></li></ul><h3 id="创建hive数据库"><a href="#创建hive数据库" class="headerlink" title="创建hive数据库"></a>创建hive数据库</h3><ul><li><code>CREATE DATABASE metastore DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</code></li><li><code>CREATE DATABASE scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</code></li><li><code>CREATE DATABASE oozie DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</code></li><li><code>CREATE DATABASE hue DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;</code></li></ul><h3 id="创建账户"><a href="#创建账户" class="headerlink" title="创建账户"></a>创建账户</h3><ul><li><code>GRANT ALL ON metastore.* TO &#39;hive&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</code></li><li><code>GRANT ALL ON scm.* TO &#39;scm&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</code></li><li><code>GRANT ALL ON oozie.* TO &#39;oozie&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</code></li><li><code>GRANT ALL ON hue.* TO &#39;hue&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</code></li></ul><h3 id="刷新权限"><a href="#刷新权限" class="headerlink" title="刷新权限"></a>刷新权限</h3><ul><li><code>flush privileges;</code></li></ul><h3 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h3><ul><li><code>SHOW DATABASES;</code></li></ul><h3 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h3><ul><li><code>SHOW GRANTS FOR &#39;hive&#39;@&#39;%&#39;;</code></li></ul><h1 id="设置Cloudera-Manager数据库-master节点"><a href="#设置Cloudera-Manager数据库-master节点" class="headerlink" title="设置Cloudera Manager数据库(master节点)"></a>设置Cloudera Manager数据库(master节点)</h1><h2 id="设置语法"><a href="#设置语法" class="headerlink" title="设置语法"></a>设置语法</h2><ul><li><code>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm 123</code></li></ul><h2 id="准备数据库"><a href="#准备数据库" class="headerlink" title="准备数据库"></a>准备数据库</h2><ul><li><code>sudo /opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm</code></li></ul><h1 id="安装CDH及其他软件"><a href="#安装CDH及其他软件" class="headerlink" title="安装CDH及其他软件"></a>安装CDH及其他软件</h1><h2 id="强烈建议-所有节点拍摄快照"><a href="#强烈建议-所有节点拍摄快照" class="headerlink" title="[强烈建议]所有节点拍摄快照"></a><strong>[强烈建议]</strong>所有节点拍摄快照</h2><h2 id="启动Cloudera-Manager-Server-master节点"><a href="#启动Cloudera-Manager-Server-master节点" class="headerlink" title="启动Cloudera Manager Server(master节点)"></a>启动Cloudera Manager Server(master节点)</h2><ul><li><code>sudo systemctl start cloudera-scm-server</code></li></ul><h2 id="查看日志-master节点"><a href="#查看日志-master节点" class="headerlink" title="查看日志(master节点)"></a>查看日志(master节点)</h2><ul><li><code>sudo tail -f /var/log/cloudera-scm-server/cloudera-scm-server.log</code></li></ul><p>直至出现<code>INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.</code></p><h2 id="登录web页面"><a href="#登录web页面" class="headerlink" title="登录web页面"></a>登录web页面</h2><ul><li><code>http://cdh-master:7180</code></li></ul><p>账户：admin<br>密码：admin</p><h2 id="安装组件"><a href="#安装组件" class="headerlink" title="安装组件"></a>安装组件</h2><h3 id="接受最终用户许可条款和条件"><a href="#接受最终用户许可条款和条件" class="headerlink" title="接受最终用户许可条款和条件"></a>接受最终用户许可条款和条件</h3><h3 id="选择Cloudera-Express免费版"><a href="#选择Cloudera-Express免费版" class="headerlink" title="选择Cloudera Express免费版"></a>选择Cloudera Express免费版</h3><h3 id="集群安装"><a href="#集群安装" class="headerlink" title="集群安装"></a>集群安装</h3><h4 id="Cluster-Basics"><a href="#Cluster-Basics" class="headerlink" title="Cluster Basics"></a>Cluster Basics</h4><ul><li><code>CDH</code></li></ul><h4 id="Specify-Hosts"><a href="#Specify-Hosts" class="headerlink" title="Specify Hosts"></a>Specify Hosts</h4><ul><li>输入<code>cdh-master, cdh-slave1, cdh-slave2</code>点击’搜索’</li></ul><h4 id="选择存储库"><a href="#选择存储库" class="headerlink" title="选择存储库"></a>选择存储库</h4><ul><li>选择<code>Public Cloudera Repository</code></li><li>选择<code>Parcels</code></li><li>其他默认</li></ul><h4 id="JDK-安装选项"><a href="#JDK-安装选项" class="headerlink" title="JDK 安装选项"></a>JDK 安装选项</h4><ul><li>选中<code>安装 Oracle Java SE 开发工具包 (JDK)</code></li></ul><h4 id="设置登录凭据"><a href="#设置登录凭据" class="headerlink" title="设置登录凭据"></a>设置登录凭据</h4><ul><li>选择<code>root</code></li><li>输入密码</li></ul><h4 id="安装agents"><a href="#安装agents" class="headerlink" title="安装agents"></a>安装agents</h4><h4 id="安装Parcels"><a href="#安装Parcels" class="headerlink" title="安装Parcels"></a>安装Parcels</h4><h4 id="Inspect-Hosts"><a href="#Inspect-Hosts" class="headerlink" title="Inspect Hosts"></a>Inspect Hosts</h4><ul><li><p>虚拟内存设置</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl -<span class="keyword">w</span> <span class="keyword">vm</span>.swappiness=<span class="number">10</span></span><br><span class="line"><span class="keyword">echo</span> <span class="keyword">vm</span>.swappiness = <span class="number">10</span> &gt;&gt; /etc/sysctl.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure></li><li><p>大内存页设置</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 临时</span></span><br><span class="line">echo never&gt;<span class="meta-keyword">/sys/</span>kernel<span class="meta-keyword">/mm/</span>transparent_hugepage/defrag</span><br><span class="line">echo never&gt;<span class="meta-keyword">/sys/</span>kernel<span class="meta-keyword">/mm/</span>transparent_hugepage/enabled</span><br><span class="line"></span><br><span class="line"><span class="meta"># 永久</span></span><br><span class="line">vim <span class="meta-keyword">/etc/</span>rc.local</span><br><span class="line"><span class="meta"># 加入如下信息</span></span><br><span class="line">echo never&gt;<span class="meta-keyword">/sys/</span>kernel<span class="meta-keyword">/mm/</span>transparent_hugepage/defrag</span><br><span class="line">echo never&gt;<span class="meta-keyword">/sys/</span>kernel<span class="meta-keyword">/mm/</span>transparent_hugepage/enabled</span><br><span class="line"><span class="meta"># 设置权限</span></span><br><span class="line">chmod +x <span class="meta-keyword">/etc/</span>rc.d/rc.local</span><br></pre></td></tr></table></figure></li></ul><h4 id="组件列表"><a href="#组件列表" class="headerlink" title="组件列表"></a>组件列表</h4><table><thead><tr><th style="text-align:left">组件</th><th style="text-align:left">版本</th></tr></thead><tbody><tr><td style="text-align:left">Supervisord</td><td style="text-align:left">3.0</td></tr><tr><td style="text-align:left">Cloudera Manager Agent</td><td style="text-align:left">6.2.0</td></tr><tr><td style="text-align:left">Cloudera Manager Management Daemon</td><td style="text-align:left">6.2.0</td></tr><tr><td style="text-align:left">Flume NG</td><td style="text-align:left">1.9.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Hadoop</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">HDFS</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">HttpFS</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">hadoop-kms</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">MapReduce 2</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">YARN</td><td style="text-align:left">3.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">HBase</td><td style="text-align:left">2.1.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Lily HBase Indexer</td><td style="text-align:left">1.5+cdh6.2.0</td></tr><tr><td style="text-align:left">Hive</td><td style="text-align:left">2.1.1+cdh6.2.0</td></tr><tr><td style="text-align:left">HCatalog</td><td style="text-align:left">2.1.1+cdh6.2.0</td></tr><tr><td style="text-align:left">Hue</td><td style="text-align:left">4.2.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Impala</td><td style="text-align:left">3.2.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Java 8</td><td style="text-align:left">1.8.0_181</td></tr><tr><td style="text-align:left">Kafka</td><td style="text-align:left">2.1.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Kite（仅限 CDH 5 ）</td><td style="text-align:left">1.0.0+cdh6.2.0</td></tr><tr><td style="text-align:left">kudu</td><td style="text-align:left">1.9.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Oozie</td><td style="text-align:left">5.1.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Parquet</td><td style="text-align:left">1.9.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Pig</td><td style="text-align:left">0.17.0+cdh6.2.0</td></tr><tr><td style="text-align:left">sentry</td><td style="text-align:left">2.1.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Solr</td><td style="text-align:left">7.4.0+cdh6.2.0</td></tr><tr><td style="text-align:left">spark</td><td style="text-align:left">2.4.0+cdh6.2.0</td></tr><tr><td style="text-align:left">Sqoop</td><td style="text-align:left">1.4.7+cdh6.2.0</td></tr><tr><td style="text-align:left">ZooKeeper</td><td style="text-align:left">3.4.5+cdh6.2.0</td></tr></tbody></table><h1 id="使用向导设置群集"><a href="#使用向导设置群集" class="headerlink" title="使用向导设置群集"></a>使用向导设置群集</h1><h2 id="选择服务"><a href="#选择服务" class="headerlink" title="选择服务"></a>选择服务</h2><ul><li>选择<code>所有服务</code></li><li><del>选择<code>HBase</code> <code>HDFS</code> <code>Hive</code> <code>Hue</code> <code>Kafka</code> <code>Oozie</code> <code>YARN(MR2 Included)</code> <code>ZooKeeper</code></del></li></ul><h2 id="自定义角色分配"><a href="#自定义角色分配" class="headerlink" title="自定义角色分配"></a>自定义角色分配</h2><ul><li>默认</li></ul><h2 id="数据库设置"><a href="#数据库设置" class="headerlink" title="数据库设置"></a>数据库设置</h2><h3 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h3><ul><li><code>MySQL &gt; 否 &gt; cdh-master &gt; metastore &gt; hive &gt; 123</code></li></ul><h3 id="Oozie"><a href="#Oozie" class="headerlink" title="Oozie"></a>Oozie</h3><ul><li><code>MySQL &gt; cdh-master &gt; oozie &gt; oozie &gt; 123</code></li></ul><h3 id="Hue"><a href="#Hue" class="headerlink" title="Hue"></a>Hue</h3><ul><li><code>MySQL &gt; cdh-master &gt; hue &gt; hue &gt; 123</code></li></ul><h2 id="审核更改"><a href="#审核更改" class="headerlink" title="审核更改"></a>审核更改</h2><ul><li>默认</li></ul><h2 id="命令详细信息"><a href="#命令详细信息" class="headerlink" title="命令详细信息"></a>命令详细信息</h2><p>Ps：若搭建过程中多次尝试安装，建议删除/dfs/nn下文件，避免HDFS服务报错</p><h2 id="汇总"><a href="#汇总" class="headerlink" title="汇总"></a>汇总</h2><h1 id="错误排查"><a href="#错误排查" class="headerlink" title="错误排查"></a>错误排查</h1><p>推荐链接 &gt;&gt; <a href="https://blog.csdn.net/zzq900503/article/details/53393721" target="_blank" rel="noopener">https://blog.csdn.net/zzq900503/article/details/53393721</a></p><p><br></p><p><meting-js id="31654478" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;CDH环境配置&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/074403.jpg&quot; alt=&quot;clay-banks-1554989-unsplash&quot;&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="CDH" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/CDH/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="CDH环境搭建" scheme="https://alessa0.cn/tags/CDH%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十五)：Flink</title>
    <link href="https://alessa0.cn/posts/6cff886e/"/>
    <id>https://alessa0.cn/posts/6cff886e/</id>
    <published>2019-04-25T09:02:34.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Flink：Storm你该回家了…</p><br><img src="https://image.alessa0.cn/090827.jpg" alt="shane-young-769905-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Flink 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://flink.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Flink</a></div><p></p><h1 id="安装Flink"><a href="#安装Flink" class="headerlink" title="安装Flink"></a>安装Flink</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp flink-1.8.0-bin-scala_2.11.tgz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf flink-1.8.0-bin-scala_2.11.tgz</code></p></li><li><p><code>rm -rf flink-1.8.0-bin-scala_2.11.tgz</code></p></li></ul><p><strong>Flink环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET FLINK PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">FLINK_HOME</span>=/usr/local/src/flink-1.8.0 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$FLINK_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改Flink配置"><a href="#修改Flink配置" class="headerlink" title="修改Flink配置"></a>修改Flink配置</h1><ul><li><p><code>cd flink-1.8.0/conf</code></p></li><li><p><code>vim flink-conf.yaml</code></p></li></ul><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 修改如下信息</span></span><br><span class="line"><span class="symbol">jobmanager.rpc.address:</span> master</span><br></pre></td></tr></table></figure><ul><li><code>vim masters</code></li></ul><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 修改如下信息</span></span><br><span class="line"><span class="symbol">master:</span><span class="number">8081</span></span><br></pre></td></tr></table></figure><ul><li><code>vim slaves</code></li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">slave1</span> </span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><h1 id="启动集群"><a href="#启动集群" class="headerlink" title="启动集群"></a>启动集群</h1><p><strong>启动服务：</strong></p><ul><li><code>start-cluster.sh</code></li></ul><p><strong>关闭集群：</strong></p><ul><li><code>stop-cluster.sh</code></li></ul><p><strong>监控网页：</strong></p><p>Web：<a href="http://master:8081" target="_blank" rel="noopener">http://master:8081</a></p><p><br></p><p><meting-js id="449235912" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Flink：Storm你该回家了…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/090827.jpg&quot; alt=&quot;shane-young-769905-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Flink" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Flink/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Flink" scheme="https://alessa0.cn/tags/Flink/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十四)：Storm on Yarn</title>
    <link href="https://alessa0.cn/posts/6a54df13/"/>
    <id>https://alessa0.cn/posts/6a54df13/</id>
    <published>2019-04-25T08:57:22.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Storm-on-Yarn：跟着老大哥有肉吃…</p><br><img src="https://image.alessa0.cn/090019.jpg" alt="max-delsid-479103-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Storm-on-Yarn 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://github.com/yahoo/storm-yarn" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Storm on Yarn</a></div><p></p><h1 id="待续……"><a href="#待续……" class="headerlink" title="待续……"></a>待续……</h1><p><br></p><p><meting-js id="27804029" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/8d61cd2a/">Flink电商团购项目（零）：环境搭建</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Storm-on-Yarn：跟着老大哥有肉吃…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/090019.jpg&quot; alt=&quot;max-delsid-479103-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Storm-on-Yarn" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Storm-on-Yarn/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Storm-on-Yarn" scheme="https://alessa0.cn/tags/Storm-on-Yarn/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十三)：Storm</title>
    <link href="https://alessa0.cn/posts/9017301c/"/>
    <id>https://alessa0.cn/posts/9017301c/</id>
    <published>2019-04-25T08:42:24.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Storm：我才是流处理！</p><br><img src="https://image.alessa0.cn/084537.jpg" alt="johannes-plenio-247177-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Storm 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://storm.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Storm</a></div><p></p><h1 id="安装Storm"><a href="#安装Storm" class="headerlink" title="安装Storm"></a>安装Storm</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp apache-storm-1.2.2.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf apache-storm-1.2.2.tar.gz</code></p></li><li><p><code>rm -rf apache-storm-1.2.2.tar.gz</code></p></li></ul><p><strong>Storm环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SET STORM PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">STORM_HOME</span>=/usr/local/src/apache-storm-1.2.2 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$STORM_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改Storm配置文件"><a href="#修改Storm配置文件" class="headerlink" title="修改Storm配置文件"></a>修改Storm配置文件</h1><ul><li><code>cd apache-storm-1.2.2</code></li></ul><p><strong>创建日志文件/数据文件：</strong></p><ul><li><p><code>mkdir data</code></p></li><li><p><code>mkdir logs</code></p></li></ul><p><strong>配置文件：</strong></p><ul><li><p><code>cd conf</code></p></li><li><p><code>vim storm.yaml</code></p></li></ul><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 添加如下信息</span></span><br><span class="line"><span class="symbol">storm.zookeeper.servers:</span> </span><br><span class="line"> - <span class="string">"master"</span> </span><br><span class="line"> - <span class="string">"slave1"</span> </span><br><span class="line"> - <span class="string">"slave2"</span> </span><br><span class="line"><span class="symbol">storm.zookeeper.port:</span> <span class="number">2181</span> </span><br><span class="line"><span class="symbol">storm.local.dir:</span> <span class="string">"/usr/local/storm-1.2.2/data"</span> </span><br><span class="line"><span class="symbol">ui.port:</span> <span class="number">8089</span> </span><br><span class="line"><span class="symbol">nimbus.seeds:</span> [<span class="string">"master"</span>] </span><br><span class="line"><span class="symbol">supervisor.slots.ports:</span> </span><br><span class="line"> - <span class="number">6700</span> </span><br><span class="line"> - <span class="number">6701</span> </span><br><span class="line"> - <span class="number">6702</span> </span><br><span class="line"> - <span class="number">6703</span> </span><br><span class="line"> - <span class="number">6704</span> </span><br><span class="line"> - <span class="number">6705</span></span><br></pre></td></tr></table></figure><h1 id="启动Storm集群"><a href="#启动Storm集群" class="headerlink" title="启动Storm集群"></a>启动Storm集群</h1><p><strong>主节点启动：</strong></p><ul><li><p><code>storm nimbus &gt;&gt; /usr/local/src/apache-storm-1.2.2/logs/nimbus.out 2&gt;&amp;1 &amp;</code></p></li><li><p><code>storm ui &gt;&gt; /usr/local/src/apache-storm-1.2.2/logs/ui.out 2&gt;&amp;1 &amp;</code></p></li></ul><p><strong>从节点启动：</strong></p><ul><li><p><code>storm supervisor &gt;&gt; /usr/local/src/apache-storm-1.2.2/logs/supervisor.out 2&gt;&amp;1 &amp;</code></p></li><li><p><code>storm logviewer &gt;&gt; /usr/local/src/apache-storm-1.2.2/logs/logviewer.out 2&gt;&amp;1 &amp;</code></p></li></ul><p><strong>主节点关闭：</strong></p><ul><li><p>kill -9 `ps -ef | grep ui.core | awk ‘{print $2}’ | head -n 1<code></code></p></li><li><p>kill -9 `ps -ef | grep daemon.nimbus | awk ‘{print $2}’ | head -n 1`</p></li><li><p>kill -9 `ps -ef | grep daemon.supervisor | awk ‘{print $2}’ | head -n 1`</p></li><li><p>kill -9 `ps -ef | grep daemon.logviewer | awk ‘{print $2}’ | head -n 1`</p></li></ul><p><strong>WEB监控页面：</strong></p><p>Web： <a href="http://master:8089/index.html" target="_blank" rel="noopener">http://master:8089/index.html</a></p><p><br></p><p><meting-js id="29836527" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Storm：我才是流处理！&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/084537.jpg&quot; alt=&quot;johannes-plenio-247177-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Storm" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Storm/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十二)：Kafka</title>
    <link href="https://alessa0.cn/posts/eee41037/"/>
    <id>https://alessa0.cn/posts/eee41037/</id>
    <published>2019-04-25T07:41:06.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Kafka：我不是写小说那个…</p><br><img src="https://image.alessa0.cn/082116.jpg" alt="title-page"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Kafka 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://kafka.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Kafka</a></div><p></p><h1 id="安装Kafka"><a href="#安装Kafka" class="headerlink" title="安装Kafka"></a>安装Kafka</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp kafka_2.11-2.2.0.tgz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf kafka_2.11-2.2.0.tgz</code></p></li><li><p><code>rm -rf kafka_2.11-2.2.0.tgz</code></p></li></ul><p><strong>Kafka环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET KAFKA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">KAFKA_HOME</span>=/usr/local/src/kafka_2.11-2.2.0 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$KAFKA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改Kafka配置"><a href="#修改Kafka配置" class="headerlink" title="修改Kafka配置"></a>修改Kafka配置</h1><ul><li><code>cd kafka_2.11-2.2.0</code></li></ul><p><strong>创建日志文件：</strong></p><ul><li><code>mkdir logs</code></li></ul><p><strong>配置文件：</strong></p><ul><li><p><code>cd config</code></p></li><li><p><code>vim server.properties</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="attr">log.dirs</span>=/usr/local/src/kafka_2.<span class="number">11</span>-<span class="number">2.2</span>.<span class="number">0</span>/logs </span><br><span class="line"><span class="attr">zookeeper.connect</span>=master:<span class="number">2181</span>,slave1:<span class="number">2181</span>,slave2:<span class="number">2181</span></span><br></pre></td></tr></table></figure><span class="label danger">仅在Master</span><ul><li><code>broker.id=0</code></li></ul><span class="label danger">仅在Slave1</span><ul><li><code>broker.id=1</code></li></ul><span class="label danger">仅在Slave2</span><ul><li><code>broker.id=2</code></li></ul><h1 id="启动Kafka集群"><a href="#启动Kafka集群" class="headerlink" title="启动Kafka集群"></a>启动Kafka集群</h1><p><strong>普通启动：</strong></p><ul><li><code>kafka-server-start.sh -daemon /usr/local/src/kafka_2.11-2.2.0/config/server.properties</code></li></ul><p><strong>关闭集群：</strong></p><ul><li><code>kafka-server-stop.sh</code></li></ul><p><br></p><p><meting-js id="1293886117" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Kafka：我不是写小说那个…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/082116.jpg&quot; alt=&quot;title-page&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Kafka" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Kafka/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Kafka" scheme="https://alessa0.cn/tags/Kafka/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十一)：Flume</title>
    <link href="https://alessa0.cn/posts/41d58b55/"/>
    <id>https://alessa0.cn/posts/41d58b55/</id>
    <published>2019-04-25T07:16:37.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Flume：xx托我给您带个话…</p><br><img src="https://image.alessa0.cn/072006.jpg" alt="clark-young-160446-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Flume 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://flume.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Flume</a></div><p></p><h1 id="安装Flume"><a href="#安装Flume" class="headerlink" title="安装Flume"></a>安装Flume</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp apache-flume-1.9.0-bin.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf apache-flume-1.9.0-bin.tar.gz</code></p></li><li><p><code>rm -rf apache-flume-1.9.0-bin.tar.gz</code></p></li></ul><p><strong>Hbase环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET FLUME PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">FLUME_HOME</span>=/usr/local/src/apache-flume-1.9.0-bin </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$FLUME_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改Flume配置"><a href="#修改Flume配置" class="headerlink" title="修改Flume配置"></a>修改Flume配置</h1><ul><li><p><code>cd apache-flume-1.9.0-bin/conf</code></p></li><li><p><code>cp flume-env.sh.template flume-env.sh</code></p></li><li><p><code>vim flume-env.sh</code></p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure><h1 id="新增配置文件"><a href="#新增配置文件" class="headerlink" title="新增配置文件"></a>新增配置文件</h1><p><strong>NetCat：</strong></p><ul><li><code>vim flume-netcat.conf</code></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># Name the components on this agent</span></span><br><span class="line"><span class="attr">agent.sources</span> = r1</span><br><span class="line"><span class="attr">agent.sinks</span> = k1</span><br><span class="line"><span class="attr">agent.channels</span> = c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Describe/configuration the source</span></span><br><span class="line"><span class="attr">agent.sources.r1.type</span> = netcat</span><br><span class="line"><span class="attr">agent.sources.r1.bind</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">agent.sources.r1.port</span> = <span class="number">44444</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Describe the sink</span></span><br><span class="line"><span class="attr">agent.sinks.k1.type</span> = logger</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use a channel which buffers events in memory</span></span><br><span class="line"><span class="attr">agent.channels.c1.type</span> = memory</span><br><span class="line"><span class="attr">agent.channels.c1.capacity</span> = <span class="number">1000</span></span><br><span class="line"><span class="attr">agent.channels.c1.transactionCapacity</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bind the source and sink to the channel</span></span><br><span class="line"><span class="attr">agent.sources.r1.channels</span> = c1</span><br><span class="line"><span class="attr">agent.sinks.k1.channel</span> = c1</span><br></pre></td></tr></table></figure><p><strong>Exec：</strong></p><ul><li><code>vim flume-exec.conf</code></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># Name the components on this agent</span></span><br><span class="line"><span class="attr">agent.sources</span> = r1</span><br><span class="line"><span class="attr">agent.sinks</span> = k1</span><br><span class="line"><span class="attr">agent.channels</span> = c1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Describe/configuration the source</span></span><br><span class="line"><span class="attr">agent.sources.r1.type</span> = exec</span><br><span class="line"><span class="attr">agent.sources.r1.command</span> = tail -f /data/hadoop/flume/test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Describe the sink</span></span><br><span class="line"><span class="attr">agent.sinks.k1.type</span> = logger</span><br><span class="line"></span><br><span class="line"><span class="comment"># Use a channel which buffers events in memory</span></span><br><span class="line"><span class="attr">agent.channels.c1.type</span> = memory</span><br><span class="line"><span class="attr">agent.channels.c1.capacity</span> = <span class="number">1000</span></span><br><span class="line"><span class="attr">agent.channels.c1.transactionCapacity</span> = <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Bind the source and sink to the channel</span></span><br><span class="line"><span class="attr">agent.sources.r1.channels</span> = c1</span><br><span class="line"><span class="attr">agent.sinks.k1.channel</span> = c1</span><br></pre></td></tr></table></figure><p><strong>Avro：</strong></p><ul><li><code>vim flume-avro.conf</code></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># Define a memory channel called c1 on agent</span></span><br><span class="line"><span class="attr">agent.channels.c1.type</span> = memory</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define an avro source alled r1 on agent and  tell it</span></span><br><span class="line"><span class="attr">agent.sources.r1.channels</span> = c1</span><br><span class="line"><span class="attr">agent.sources.r1.type</span> = avro</span><br><span class="line"><span class="attr">agent.sources.r1.bind</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">agent.sources.r1.port</span> = <span class="number">44444</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Describe/configuration the source</span></span><br><span class="line"><span class="attr">agent.sinks.k1.type</span> = hdfs</span><br><span class="line"><span class="attr">agent.sinks.k1.channel</span> = c1</span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.path</span> = hdfs://master:<span class="number">9000</span>/flume_data_pool</span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.filePrefix</span> = events-</span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.fileType</span> = DataStream</span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.writeFormat</span> = Text</span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.rollSize</span> = <span class="number">0</span></span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.rollCount</span>= <span class="number">600000</span></span><br><span class="line"><span class="attr">agent.sinks.k1.hdfs.rollInterval</span> = <span class="number">600</span></span><br><span class="line"></span><br><span class="line"><span class="attr">agent.channels</span> = c1</span><br><span class="line"><span class="attr">agent.sources</span> = r1</span><br><span class="line"><span class="attr">agent.sinks</span> = k1</span><br></pre></td></tr></table></figure><h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><p><strong>NetCat：</strong></p><p># 服务端</p><ul><li><code>flume-ng agent --conf conf --conf-file conf/flume-netcat.conf --name=agent -Dflume.root.logger=INFO,console</code></li></ul><p># 客户端</p><ul><li><code>flume-ng agent --conf conf --conf-file conf/flume-netcat.conf --name=agent -Dflume.root.logger=INFO,console</code></li></ul><p><strong>Exec：</strong></p><p># 服务端</p><ul><li><code>flume-ng agent --conf conf --conf-file conf/flume-exec.conf --name=agent -Dflume.root.logger=INFO,console</code></li></ul><p># 客户端</p><p><strong>Avro：</strong></p><p># 服务端</p><ul><li><code>flume-ng agent --conf conf --conf-file conf/flume-netcat.conf --name=agent -Dflume.root.logger=DEBUG,console</code></li></ul><p># 客户端</p><ul><li><code>telnet master 44444</code></li></ul><p><br></p><p><meting-js id="449239668" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Flume：xx托我给您带个话…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/072006.jpg&quot; alt=&quot;clark-young-160446-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Flume" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Flume/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Flume" scheme="https://alessa0.cn/tags/Flume/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(十)：Thrift</title>
    <link href="https://alessa0.cn/posts/34d202af/"/>
    <id>https://alessa0.cn/posts/34d202af/</id>
    <published>2019-04-25T06:55:08.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Thrift：行李少的可以从我这儿走…</p><br><img src="https://image.alessa0.cn/035105.jpg" alt="alejandro-escamilla-10-unsplash"><a id="more"></a><p></p><blockquote class="blockquote-center"><p>Thrift 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://thrift.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Thrift</a></div><p></p><h1 id="安装Thrift"><a href="#安装Thrift" class="headerlink" title="安装Thrift"></a>安装Thrift</h1><span class="label danger">仅在Master</span><p><strong>安装依赖环境：</strong></p><ul><li><p><code>yum -y install automake libtool flex bison pkgconfig gcc-c++ boost-devel libevent-devel zlib-devel python-devel ruby-devel openssl-devel</code></p></li><li><p><code>yum -y install boost-devel</code></p></li><li><p><code>yum -y install libevent-devel</code></p></li></ul><p><strong>安装：</strong></p><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp thrift-0.12.0.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf thrift-0.12.0.tar.gz</code></p></li><li><p><code>rm -rf thrift-0.12.0.tar.gz</code></p></li></ul><p><strong>c++三部曲</strong>：</p><ul><li><p><code>cd thrift-0.12.0</code></p></li><li><p><code>./configure --with-cpp=no --with-ruby=no</code></p></li><li><p><code>make</code></p></li><li><p><code>make install</code></p></li></ul><h1 id="Hbase源码包"><a href="#Hbase源码包" class="headerlink" title="Hbase源码包"></a>Hbase源码包</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp hbase-1.3.3-src.tar.gz /usr/local/src/tmp</code></p></li><li><p><code>cd /usr/local/src/tmp</code></p></li><li><p><code>tar zxvf hbase-1.3.3-src.tar.gz</code></p></li><li><p><code>mv hbase-1.3.3 hbase-1.3.3-src</code></p></li><li><p><code>rm -rf hbase-1.3.3-src.tar.gz</code></p></li><li><p><code>mv hbase-1.3.3-src/ ../</code></p></li></ul><h1 id="待续……"><a href="#待续……" class="headerlink" title="待续……"></a>待续……</h1><p><br></p><p><meting-js id="438801442" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Thrift：行李少的可以从我这儿走…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/035105.jpg&quot; alt=&quot;alejandro-escamilla-10-unsplash&quot;&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Thrift" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Thrift/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Thrift" scheme="https://alessa0.cn/tags/Thrift/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(九)：Hbase</title>
    <link href="https://alessa0.cn/posts/497b75db/"/>
    <id>https://alessa0.cn/posts/497b75db/</id>
    <published>2019-04-25T06:21:21.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Hbase：我不认识Hive…</p><br><img src="https://image.alessa0.cn/063435.jpg" alt="campaign-creators-771723-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Hbase 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://hbase.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Hbase</a></div><p></p><h1 id="安装Hbase"><a href="#安装Hbase" class="headerlink" title="安装Hbase"></a>安装Hbase</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp hbase-1.3.3-bin.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf hbase-1.3.3-bin.tar.gz</code></p></li><li><p><code>rm -rf hbase-1.3.3-bin.tar.gz</code></p></li></ul><p><strong>Hbase环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET HBASE PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HBASE_HOME</span>=/usr/local/src/hbase-1.3.3 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HBASE_CLASSPATH</span>=<span class="variable">$HBASE_HOME</span>/conf </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HBASE_LOG_DIR</span>=<span class="variable">$HBASE_HOME</span>/logs </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HBASE_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改Hbase配置"><a href="#修改Hbase配置" class="headerlink" title="修改Hbase配置"></a>修改Hbase配置</h1><ul><li><code>cd hbase-1.3.3</code></li></ul><p><strong>创建临时目录和文件目录：</strong></p><ul><li><p><code>mkdir logs</code></p></li><li><p><code>mkdir tmp</code></p></li></ul><p><strong>配置文件：</strong></p><ul><li><p><code>cd conf</code></p></li><li><p><code>vim regionservers</code></p></li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="attribute">slave1</span> </span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><ul><li><code>vim hbase-env.sh</code></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line">export JAVA_HOME=<span class="regexp">/usr/local</span><span class="regexp">/src/jdk</span>1.<span class="number">8.0_212</span> </span><br><span class="line">export CLASSPATH=.:$<span class="symbol">CLASSPATH:</span>$JAVA_HOME/<span class="class"><span class="keyword">lib</span> </span></span><br><span class="line"><span class="comment"># 禁用Hbase自带独立Zookeeper集群</span></span><br><span class="line">export HBASE_MANAGES_ZK=<span class="literal">false</span></span><br></pre></td></tr></table></figure><ul><li><code>vim hbase-site.xml</code></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 添加如下信息</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;configuration&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.tmp.dir<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>hbase<span class="number">-1.3</span><span class="number">.3</span>/tmp<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.rootdir<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>hdfs:<span class="comment">//master:9000/hbase&lt;/value&gt; </span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.cluster.distributed<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>true<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.zookeeper.quorum<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>master,slave1,slave2<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.zookeeper.property.dataDir<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>zookeeper<span class="number">-3.4</span><span class="number">.14</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hbase.master.info.port<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">60010</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><h1 id="启动集群"><a href="#启动集群" class="headerlink" title="启动集群"></a>启动集群</h1><span class="label danger">仅在Master</span><p><strong>启动Hbase服务：</strong></p><ul><li><code>start-hbase.sh</code></li></ul><p><strong>关闭Hbase服务：</strong></p><ul><li><code>stop-hbase.sh</code></li></ul><p><br></p><p><meting-js id="1325898369" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Hbase：我不认识Hive…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/063435.jpg&quot; alt=&quot;campaign-creators-771723-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="HBase" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/HBase/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="HBase" scheme="https://alessa0.cn/tags/HBase/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(八)：Spark</title>
    <link href="https://alessa0.cn/posts/55aa9f3f/"/>
    <id>https://alessa0.cn/posts/55aa9f3f/</id>
    <published>2019-04-25T05:24:37.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Spark：传说中的星二代</p><br><img src="https://image.alessa0.cn/052725.jpg" alt="aziz-acharki-370112-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Spark 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://spark.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Spark</a></div><p></p><h1 id="安装Spark"><a href="#安装Spark" class="headerlink" title="安装Spark"></a>安装Spark</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp spark-2.3.3-bin-hadoop2.7.tgz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf spark-2.3.3-bin-hadoop2.7.tgz</code></p></li><li><p><code>rm -rf spark-2.3.3-bin-hadoop2.7.tgz</code></p></li></ul><p><strong>配置Spark环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET SPARK PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_HOME</span>=/usr/local/src/spark-2.3.3-bin-hadoop2.7 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$SPARK_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="修改spark配置文件"><a href="#修改spark配置文件" class="headerlink" title="修改spark配置文件"></a>修改spark配置文件</h1><ul><li><p><code>cd spark-2.3.3-bin-hadoop2.7/conf</code></p></li><li><p><code>cp spark-env.sh.template spark-env.sh</code></p></li><li><p><code>vim spark-env.sh</code></p></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/usr/local/src/scala-2.11.12 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/local/src/jdk1.8.0_212 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/usr/local/src/hadoop-2.8.5 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_CONF_DIR</span>=<span class="variable">$HADOOP_HOME</span>/etc/hadoop </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SPARK_DAEMON_JAVA_OPTS</span>=<span class="string">"-Dspark.deploy.recoveryMode=ZOOKEEPER -Dspark.deploy.zookeeper.url=master:2181,slave1:2181,slave2:2181"</span> </span><br><span class="line"><span class="attribute">SPARK_MASTER_IP</span>=master </span><br><span class="line"><span class="attribute">SPARK_LOCAL_DIRS</span>=/usr/local/src/spark-2.3.3-bin-hadoop2.7 </span><br><span class="line"><span class="attribute">SPARK_DRIVER_MEMORY</span>=1G</span><br></pre></td></tr></table></figure><ul><li><p><code>cp slaves.template slaves</code></p></li><li><p><code>vim slaves</code></p></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><h1 id="启动Standalone"><a href="#启动Standalone" class="headerlink" title="启动Standalone"></a>启动Standalone</h1><span class="label danger">仅在Master</span><p><strong>启动集群：</strong></p><ul><li><p><code>cd spark-2.3.3-bin-hadoop2.7/sbin</code></p></li><li><p><code>./start-all.sh</code></p></li></ul><p><strong>WEB监控页面：</strong></p><ul><li>Spark：<a href="http://master:8080" target="_blank" rel="noopener">http://master:8080</a></li></ul><h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><ul><li><code>cd spark-2.3.3-bin-hadoop2.7</code></li></ul><p><strong>本地模式：</strong></p><ul><li><code>./bin/run-example SparkPi 10 --master local[2]</code></li></ul><p><strong>集群Standlone：</strong></p><ul><li><code>./bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://master:7077 examples/jars/spark-examples_2.11-2.3.3.jar 10</code></li></ul><p><strong>Spark on yarn：</strong></p><ul><li><code>./bin/spark-submit --class org.apache.spark.examples.SparkPi --master yarn-cluster examples/jars/spark-examples_2.11-2.3.3.jar 10</code></li></ul><p><br></p><p><meting-js id="509512457" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://alessa0.cn/posts/8d61cd2a/">Flink电商团购项目（零）：环境搭建</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Spark：传说中的星二代&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/052725.jpg&quot; alt=&quot;aziz-acharki-370112-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Spark" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Spark/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Spark" scheme="https://alessa0.cn/tags/Spark/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(七)：Hive</title>
    <link href="https://alessa0.cn/posts/9cf82033/"/>
    <id>https://alessa0.cn/posts/9cf82033/</id>
    <published>2019-04-25T03:03:30.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Hive：不要把我认成Hbase</p><br><img src="https://image.alessa0.cn/035137.jpg" alt="mounzer-awad-348688-unsplash"><a id="more"></a><p></p><blockquote class="blockquote-center"><p>Hive 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://hive.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Hive</a></div><p></p><h1 id="安装Hive"><a href="#安装Hive" class="headerlink" title="安装Hive"></a>安装Hive</h1><span class="label danger">仅在Master</span> <span class="label danger">仅在Client</span><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp apache-hive-2.3.4-bin.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf apache-hive-2.3.4-bin.tar.gz</code></p></li><li><p><code>rm -rf apache-hive-2.3.4-bin.tar.gz</code></p></li></ul><p><strong>配置Hive环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET Hive PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HIVE_HOME</span>=/usr/local/src/apache-hive-2.3.4-bin </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="配置mysql驱动包"><a href="#配置mysql驱动包" class="headerlink" title="配置mysql驱动包"></a>配置mysql驱动包</h1><span class="label danger">仅在Master</span><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp mysql-connector-java-5.1.47.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf mysql-connector-java-5.1.47.tar.gz</code></p></li><li><p><code>rm -rf mysql-connector-java-5.1.47.tar.gz</code></p></li><li><p><code>cp mysql-connector-java-5.1.47-bin.jar /usr/local/src/apache-hive-2.3.4-bin/lib/</code></p></li></ul><p><strong>更换jline包（版本不一致）：</strong></p><ul><li><code>cp apache-hive-2.3.4-bin/lib/jline-2.12.jar /usr/local/src/hadoop-2.8.5/share/hadoop/yarn/lib/</code></li></ul><h1 id="配置hive"><a href="#配置hive" class="headerlink" title="配置hive"></a>配置hive</h1><span class="label danger">仅在Master</span> <span class="label danger">仅在Client</span><ul><li><code>cd apache-hive-2.3.4-bin</code></li></ul><p><strong>创建临时目录/日志目录/数仓目录：</strong></p><ul><li><p><code>mkdir -p data/hive/log</code></p></li><li><p><code>mkdir -p data/hive/tmp</code></p></li><li><p><code>mkdir -p data/hive/warehouse</code></p></li></ul><p><strong>配置文件：</strong></p><ul><li><p><code>cd conf</code></p></li><li><p><code>cp hive-env.sh.template hive-env.sh</code></p></li><li><p><code>vim hive-env.sh</code></p></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line">export JAVA_HOME=<span class="regexp">/usr/local</span><span class="regexp">/src/jdk</span>1.<span class="number">8.0_212</span> </span><br><span class="line">export HADOOP_HOME=<span class="regexp">/usr/local</span><span class="regexp">/src/hadoop</span>-<span class="number">2.8</span>.<span class="number">5</span> </span><br><span class="line">export HIVE_HOME=<span class="regexp">/usr/local</span><span class="regexp">/src/apache</span>-hive-<span class="number">2.3</span>.<span class="number">4</span>-bin </span><br><span class="line">export HIVE_CONF_DIR=<span class="regexp">/usr/local</span><span class="regexp">/src/apache</span>-hive-<span class="number">2.3</span>.<span class="number">4</span>-bin/conf </span><br><span class="line">export HIVE_AUX_JARS=<span class="regexp">/usr/local</span><span class="regexp">/src/apache</span>-hive-<span class="number">2.3</span>.<span class="number">4</span>-bin/<span class="class"><span class="keyword">lib</span></span></span><br></pre></td></tr></table></figure><ul><li><p><code>cp hive-default.xml.template hive-site.xml</code></p></li><li><p><code>vim hive-site.xml</code></p></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 添加如下信息</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;configuration&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionURL<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>jdbc:mysql:<span class="comment">//master:3306/hive?createDatabaseIfNotExist=true&amp;amp;useSSL=false&lt;/value&gt; </span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionDriverName<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>com.mysql.jdbc.Driver<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionUserName<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>alessa0<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionPassword<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>&#123;密码&#125;<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.metastore.warehouse.dir<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>apache-hive<span class="number">-2.3</span><span class="number">.4</span>-bin<span class="meta-keyword">/data/</span>hive/warehouse<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.exec.scratchdir<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>apache-hive<span class="number">-2.3</span><span class="number">.4</span>-bin<span class="meta-keyword">/data/</span>hive/tmp<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.querylog.location<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="meta-keyword">/usr/</span>local<span class="meta-keyword">/src/</span>apache-hive<span class="number">-2.3</span><span class="number">.4</span>-bin<span class="meta-keyword">/data/</span>hive/log<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line"><span class="params">&lt;/configuration&gt;</span></span><br></pre></td></tr></table></figure><p><strong>把{system:java.io.tmpdir} 改成 /usr/local/src/apache-hive-2.3.4-bin/data/hive/tmp：</strong></p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/$&#123;system<span class="function">:java.io.tmpdir</span>&#125;/\<span class="string">/usr</span>\<span class="string">/local</span>\<span class="string">/src</span>\<span class="string">/apache-hive-2.3.4-bin</span>\<span class="string">/data</span>\<span class="string">/hive</span>\<span class="string">/tmp/g</span></span><br></pre></td></tr></table></figure><p><strong>把 {system:user.name} 改成 {user.name} ：</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:%s/</span><span class="variable">$&#123;</span><span class="symbol">system:</span>user.name&#125;/alessa<span class="number">0</span>/g</span><br></pre></td></tr></table></figure><h1 id="初始化hive-MySQL版"><a href="#初始化hive-MySQL版" class="headerlink" title="初始化hive(MySQL版)"></a>初始化hive(MySQL版)</h1><ul><li><code>schematool -dbType mysql -initSchema</code></li></ul><h1 id="配置使用hiveserver2"><a href="#配置使用hiveserver2" class="headerlink" title="配置使用hiveserver2"></a>配置使用hiveserver2</h1><span class="label danger">仅在Master</span><ul><li><code>vim hive-site.xml</code></li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 添加如下信息</span></span><br><span class="line"></span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.server2.thrift.port<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">10000</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.server2.thrift.bind.host<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>master<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.server2.enable.doAs<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>false<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.metastore.uris<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>thrift:<span class="comment">//master:9083&lt;/value&gt; </span></span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.support.concurrency<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>true<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.zookeeper.quorum<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>master:<span class="number">2181</span>,slave1:<span class="number">2181</span>,slave2:<span class="number">2181</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.server2.webui.host<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span>master<span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span> </span><br><span class="line">    <span class="params">&lt;property&gt;</span> </span><br><span class="line">        <span class="params">&lt;name&gt;</span>hive.server2.webui.port<span class="params">&lt;/name&gt;</span> </span><br><span class="line">        <span class="params">&lt;value&gt;</span><span class="number">10002</span><span class="params">&lt;/value&gt;</span> </span><br><span class="line">    <span class="params">&lt;/property&gt;</span></span><br></pre></td></tr></table></figure><h1 id="服务端启动"><a href="#服务端启动" class="headerlink" title="服务端启动"></a>服务端启动</h1><span class="label danger">仅在Master</span><p><strong>启动 metastore 服务</strong> <span class="label default">Shell</span></p><ul><li><code>nohup hive --service metastore &gt;&gt; /usr/local/src/apache-hive-2.3.4-bin/logs/hivelog.log 2&gt;&amp;1 &amp;</code></li></ul><p><strong>启动 hiveserver2 服务</strong> <span class="label default">Shell</span></p><ul><li><code>nohup hiveserver2 1&gt;/usr/local/src/apache-hive-2.3.4-bin/logs/hiveserver.log 2&gt;/usr/local/src/apache-hive-2.3.4-bin/logs/hiveserver.err &amp;</code></li></ul><p><strong>测试</strong></p><ul><li>Web UI：<a href="http://master:10002/" target="_blank" rel="noopener">http://master:10002/</a></li></ul><h1 id="客户端连接"><a href="#客户端连接" class="headerlink" title="客户端连接"></a>客户端连接</h1><span class="label danger">仅在Client</span><p><strong>启动beeline ：</strong> <span class="label default">Shell</span></p><ul><li><code>beeline -u &quot;jdbc:hive2://master:10000&quot; alessa0 1008</code></li></ul><p><strong>退出beeline ：</strong> <span class="label default">Shell</span></p><ul><li><code>!q</code></li></ul><p><br></p><p><meting-js id="31473269" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Hive：不要把我认成Hbase&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/035137.jpg&quot; alt=&quot;mounzer-awad-348688-unsplash&quot;&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Hive" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Hive/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Hive" scheme="https://alessa0.cn/tags/Hive/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(六)：MySQL</title>
    <link href="https://alessa0.cn/posts/3f038b9/"/>
    <id>https://alessa0.cn/posts/3f038b9/</id>
    <published>2019-04-25T02:31:11.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">MySQL：我就是个工具人…</p><br><img src="https://image.alessa0.cn/024045.jpg" alt="kevin-ku-364843-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>MySQL 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://www.mysql.com/cn/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>MySQL</a></div><p></p><h1 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h1><span class="label danger">仅在Master</span><p><strong>安装mariadb：</strong> <span class="label success">开源版MySQL</span></p><ul><li><p><code>yum -y install mariadb-server mariadb</code></p></li><li><p><code>rpm -q mariadb mariadb-server</code></p></li></ul><p><strong>设置开机启动：</strong></p><ul><li><p><code>systemctl enable mariadb</code></p></li><li><p><code>systemctl daemon-reload</code></p></li></ul><p><strong>开启mysql：</strong></p><ul><li><code>systemctl start mariadb</code></li></ul><p><strong>关闭mysql：</strong></p><ul><li><code>systemctl stop mariadb</code></li></ul><p><strong>重启mysql：</strong></p><ul><li><code>systemctl restart mariadb</code></li></ul><p><strong>查看mysql状态：</strong></p><ul><li><code>systemctl status mariadb</code></li></ul><h1 id="通过内置的安全脚本实现对数据库的安全保护"><a href="#通过内置的安全脚本实现对数据库的安全保护" class="headerlink" title="通过内置的安全脚本实现对数据库的安全保护"></a>通过内置的安全脚本实现对数据库的安全保护</h1><ul><li><code>mysql_secure_installation</code></li></ul><h1 id="创建Hive账户"><a href="#创建Hive账户" class="headerlink" title="创建Hive账户"></a>创建Hive账户</h1><p><strong>登录root账户：</strong></p><ul><li><code>mysql -uroot -p</code></li></ul><p><strong>创建账户：</strong></p><ul><li><code>CREATE USER &#39;alessa0&#39;@&#39;%&#39; IDENTIFIED BY &#39;{密码}&#39;;</code></li></ul><p><strong>设置mysql远程登录：</strong></p><ul><li><code>GRANT ALL ON *.* TO &#39;alessa0&#39;@&#39;%&#39;;</code></li></ul><p><strong>刷新权限：</strong></p><ul><li><code>flush privileges;</code></li></ul><p><br></p><p><meting-js id="145223" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="www.chunlife.top/2018/09/22/MySQL查询/">MySQL查询</a></li><li><a href="chunlife.top/2018/09/22/MySQL查询/">MySQL查询</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;MySQL：我就是个工具人…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/024045.jpg&quot; alt=&quot;kevin-ku-364843-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="MySQL" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/MySQL/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="MySQL" scheme="https://alessa0.cn/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(五)：Redis</title>
    <link href="https://alessa0.cn/posts/9aff70cb/"/>
    <id>https://alessa0.cn/posts/9aff70cb/</id>
    <published>2019-04-24T09:41:34.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Redis：就是这么快！</p><br><img src="https://image.alessa0.cn/163221.jpg" alt="shiro-hatori-258976-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Redis 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://redis.io" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Redis</a></div><p></p><h1 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp redis-5.0.4.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf redis-5.0.4.tar.gz</code></p></li><li><p><code>rm -rf redis-5.0.4.tar.gz</code></p></li></ul><h1 id="待续……"><a href="#待续……" class="headerlink" title="待续……"></a>待续……</h1><p><br></p><p><meting-js id="494865824" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://zsnmwy.net/300.html">针对Redis默认端口的挖矿脚本分析</a></li><li><a href="https://abelsu7.top/2019/01/08/docker-notes/">Docker 笔记 1：Docker 基础与搭建第一个 Docker 应用栈</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Redis：就是这么快！&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/163221.jpg&quot; alt=&quot;shiro-hatori-258976-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Redis" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Redis/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Redis" scheme="https://alessa0.cn/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(四)：ZooKeeper</title>
    <link href="https://alessa0.cn/posts/9c5427b6/"/>
    <id>https://alessa0.cn/posts/9c5427b6/</id>
    <published>2019-04-24T09:40:10.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">ZooKeeper：你们都安分点…</p><br><img src="https://image.alessa0.cn/051510.jpg" alt="daiga-ellaby-354470-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>ZooKeeper 安装配置</p></blockquote><p></p><div class="text-center"><a class="btn" href="https://zookeeper.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Zookeeper</a></div><p></p><h1 id="安装Zookeeper"><a href="#安装Zookeeper" class="headerlink" title="安装Zookeeper"></a>安装Zookeeper</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp zookeeper-3.4.14.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src</code></p></li><li><p><code>tar zxvf zookeeper-3.4.14.tar.gz</code></p></li><li><p><code>rm -rf zookeeper-3.4.14.tar.gz</code></p></li></ul><p><strong>配置Zookeeper环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET ZOOKEEPER PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">ZOOKEEPER_HOME</span>=/usr/local/src/zookeeper-3.4.14 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure><ul><li>`source ~/.bashrc</li></ul><h1 id="修改Zookeeper配置"><a href="#修改Zookeeper配置" class="headerlink" title="修改Zookeeper配置"></a>修改Zookeeper配置</h1><ul><li><code>cd zookeeper-3.4.14</code></li></ul><p><strong>创建临时目录/日志目录：</strong></p><ul><li><p><code>mkdir data</code></p></li><li><p><code>mkdir logs</code></p></li></ul><p><strong>配置文件：</strong></p><ul><li><p><code>cd conf</code></p></li><li><p><code>cp zoo_sample.cfg zoo.cfg</code></p></li><li><p><code>vim zoo.cfg</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="attr">dataDir</span>=/usr/local/src/zookeeper-<span class="number">3.4</span>.<span class="number">14</span>/data </span><br><span class="line"><span class="attr">dataLogDir</span>=/usr/local/src/zookeeper-<span class="number">3.4</span>.<span class="number">14</span>/logs </span><br><span class="line"><span class="attr">server.1</span>=master:<span class="number">2888</span>:<span class="number">3888</span> </span><br><span class="line"><span class="attr">server.2</span>=slave1:<span class="number">2888</span>:<span class="number">3888</span> </span><br><span class="line"><span class="attr">server.3</span>=slave2:<span class="number">2888</span>:<span class="number">3888</span></span><br></pre></td></tr></table></figure><p><strong>分别添加唯一标识ID：</strong></p><span class="label danger">仅在Master</span><ul><li><code>echo &quot;1&quot; &gt; /usr/local/src/zookeeper-3.4.14/data/myid</code></li></ul><p>\<span class="label danger">仅在Slava1</span></p><ul><li><code>echo &quot;2&quot; &gt; /usr/local/src/zookeeper-3.4.14/data/myid</code></li></ul><p>\<span class="label danger">仅在Slava2</span></p><ul><li><code>echo &quot;3&quot; &gt; /usr/local/src/zookeeper-3.4.14/data/myid</code></li></ul><h1 id="启动Zookeeper"><a href="#启动Zookeeper" class="headerlink" title="启动Zookeeper"></a>启动Zookeeper</h1><p><strong>启动服务：</strong></p><ul><li><code>zkServer.sh start</code></li></ul><p><strong>查看运行状态：</strong></p><ul><li><p><code>zkServer.sh status</code></p></li><li><p><code>jps</code></p></li></ul><p><strong>关闭服务：</strong></p><ul><li><code>zkServer.sh stop</code></li></ul><p><br></p><p><meting-js id="1359595520" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;ZooKeeper：你们都安分点…&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/051510.jpg&quot; alt=&quot;daiga-ellaby-354470-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Zookeeper" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Zookeeper/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Zookeeper" scheme="https://alessa0.cn/tags/Zookeeper/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(三)：Hadoop</title>
    <link href="https://alessa0.cn/posts/6617c8b9/"/>
    <id>https://alessa0.cn/posts/6617c8b9/</id>
    <published>2019-04-24T09:40:02.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Hadoop：我好了你们再上</p><br><img src="https://image.alessa0.cn/163232.jpeg" alt="664px-Hadoop_logo.svg"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Hadoop 安装配置</p></blockquote><div class="text-center"><a class="btn" href="https://hadoop.apache.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Hadoop</a></div><br>Ps：除非特别指出<span class="label danger">仅在Master</span>，则在所有节点配置<br><br># 安装Hadoop<br><br><em><code>cd /mnt/hgfs/Hadoop</code> </em><code>cp hadoop-2.8.5.tar.gz /usr/local/src/</code><br><br><em><code>cd /usr/local/src</code> </em><code>tar zxvf hadoop-2.8.5.tar.gz</code><br><br><em><code>rm -rf hadoop-2.8.5.tar.gz</code><br><br><strong>配置Hadoop环境变量：</strong> </em><code>vim ~/.bashrc</code><br><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET HADOOP PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/usr/local/src/hadoop-2.8.5 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/bin </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure><br><br><em><code>source ~/.bashrc</code><br><br><br><br># Hadoop配置文件 </em><code>cd hadoop-2.8.5</code><br><br><strong>创建临时目录和文件目录：</strong><br><br>- <code>mkdir -p /usr/local/src/hadoop-2.8.5/dfs/name</code><br><br>- <code>mkdir -p /usr/local/src/hadoop-2.8.5/dfs/data</code><br><br>- <code>mkdir -p /usr/local/src/hadoop-2.8.5/tmp/dfs</code><br><br><br><br><em><code>cd etc/hadoop</code><br><br><strong>仅在Client配置(若无可跳过此步骤)：</strong> </em><code>vim core-site.xml</code><br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定Hadoop所使用的文件系统Schema --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br><em><code>mv mapred-site.xml.template mapred-site.xml</code> </em><code>vim mapred-site.xml</code><br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br><em><code>vim yarn-site.xml</code><br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定ResourceManager地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br><strong>修改Hadoop配置文件：</strong> </em><code>vim hadoop-env.sh</code><br><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure><br><br><em><code>vim yarn-env.sh</code><br><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/local/src/jdk1.8.0_212</span><br></pre></td></tr></table></figure></em><code>vim slaves</code><br><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><br><br><em><code>vim core-site.xml</code><br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定Hadoop所使用的文件系统Schema --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定HDFS本地临时存放目录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop-2.8.5/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></em><code>vim hdfs-site.xml</code><br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定SecondaryNamenode端口地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:9001<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定HDFS本地Namenode存放目录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/src/hadoop-2.8.5/dfs.name<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定HDFS本地Datanode存放目录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/src/hadoop-2.8.5/dfs.data<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- HDFS副本数量(小于等于从节点的数量) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><br><br>*<div class="text-center"><div class="tabs" id="选项卡"><ul class="nav-tabs"><li class="tab active"><a href="#选项卡-1">选项卡 1</a></li><li class="tab"><a href="#选项卡-2">选项卡 2</a></li><li class="tab"><a href="#选项卡-3">选项卡 3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="选项卡-1"><div class="text-center"><a class="btn" href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Java</a></div></div><div class="tab-pane" id="选项卡-2"><div class="text-center"><a class="btn" href="https://www.anaconda.com/distribution/#download-section" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Anaconda3</a></div></div><div class="tab-pane" id="选项卡-3"><div class="text-center"><a class="btn" href="https://www.scala-lang.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Scala</a></div></div></div></div></div><ul><li><code>vim mapred-site.xml</code></li></ul><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"># 添加如下信息</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- 指定MapReduce程序运行在Yarn上 --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 配置JHS --&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.app.mapreduce.am.staging-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/src/hadoop-2.8.5/tmp/hadoop-yarn/staging<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.intermediate-done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>$</span><span class="template-variable">&#123;yarn.app.mapreduce.am.staging-dir&#125;</span><span class="xml">/history/done_intermediate<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.done-dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>$</span><span class="template-variable">&#123;yarn.app.mapreduce.am.staging-dir&#125;</span><span class="xml">/history/done<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.cleaner.enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.cleaner.interval-ms<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>86400000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.max-age-ms<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.move.interval-ms<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>180000<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ul><li><code>vim yarn-site.xml</code></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定reducer获取数据的方式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定reducer获取数据所需的类--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="comment">&lt;!-- 指定ResourceManager地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8032<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.scheduler.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8030<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.resource-tracker.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8035<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.admin.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8033<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:8088<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="启动集群"><a href="#启动集群" class="headerlink" title="启动集群"></a>启动集群</h1><span class="label danger">仅在Master</span><p><strong>初始化NameNode：</strong></p><ul><li><code>hadoop namenode -format</code></li></ul><p><strong>启动Hadoop集群：</strong></p><ul><li><p><code>start-dfs.sh</code></p></li><li><p><code>start-yarn.sh</code></p></li></ul><p><strong>WEB监控页面：</strong></p><ul><li><p>HDFS：<a href="http://ip:50070" target="_blank" rel="noopener">http://ip:50070</a></p></li><li><p>YARN：<a href="http://ip:8088" target="_blank" rel="noopener">http://ip:8088</a></p></li></ul><p><br></p><p><meting-js id="1313354324" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Hadoop：我好了你们再上&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/163232.jpeg&quot; alt=&quot;664px-Hadoop_logo.svg&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Hadoop" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Hadoop/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Hadoop" scheme="https://alessa0.cn/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(二)：语言环境</title>
    <link href="https://alessa0.cn/posts/18e4e892/"/>
    <id>https://alessa0.cn/posts/18e4e892/</id>
    <published>2019-04-24T09:36:35.000Z</published>
    <updated>2019-07-17T09:01:47.783Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">Java, Python, Scala</p><br><img src="https://image.alessa0.cn/143320.jpg" alt="maximilian-weisbecker-544039-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>人生苦短</p></blockquote><p>Ps：安装包均存放于vmware共享文件夹Hadoop中</p><p></p><div class="text-center"><a class="btn" href="https://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Java</a><a class="btn" href="https://www.anaconda.com/distribution/#download-section" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Anaconda3</a><a class="btn" href="https://www.scala-lang.org/" target="_blank" rel="noopener"><i class="fa fa-home fa-lg fa-fw"></i>Scala</a></div><p></p><h1 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp jdk-8u212-linux-x64.tar.gz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf jdk-8u212-linux-x64.tar.gz</code></p></li><li><p><code>rm -rf jdk-8u212-linux-x64.tar.gz</code></p></li></ul><p><strong>配置JDK环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET JAVA PATH </span></span><br><span class="line">export JAVA_HOME=<span class="regexp">/usr/local</span><span class="regexp">/src/jdk</span>1.<span class="number">8.0_212</span> </span><br><span class="line">export CLASSPATH=.:$<span class="symbol">CLASSPATH:</span>$JAVA_HOME/<span class="class"><span class="keyword">lib</span> </span></span><br><span class="line">export PATH=$<span class="symbol">PATH:</span>$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><h1 id="安装anaconda3"><a href="#安装anaconda3" class="headerlink" title="安装anaconda3"></a>安装anaconda3</h1><ul><li><code>cd /mnt/hgfs/Hadoop</code></li><li><code>cp Miniconda3-latest-Linux-x86_64.sh /usr/local/src/</code></li><li><code>cd /usr/local/src</code></li><li><code>sudo yum -y install bzip2</code></li><li><code>sh Miniconda3-latest-Linux-x86_64.sh</code></li><li><code>rm -rf Miniconda3-latest-Linux-x86_64.sh</code></li></ul><p><strong>配置环境变量：</strong></p><ul><li><code>source ~/.bashrc</code></li></ul><p><strong>更新conda环境：</strong></p><ul><li><code>conda update —all</code></li></ul><h1 id="安装Scala"><a href="#安装Scala" class="headerlink" title="安装Scala"></a>安装Scala</h1><ul><li><p><code>cd /mnt/hgfs/Hadoop</code></p></li><li><p><code>cp scala-2.11.12.tgz /usr/local/src/</code></p></li><li><p><code>cd /usr/local/src/</code></p></li><li><p><code>tar zxvf scala-2.11.12.tgz</code></p></li><li><p><code>rm -rf scala-2.11.12.tgz</code></p></li></ul><p><strong>配置Scala环境变量：</strong></p><ul><li><code>vim ~/.bashrc</code></li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加如下信息</span></span><br><span class="line"><span class="comment"># SET SCALA PATH </span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">SCALA_HOME</span>=/usr/local/src/scala-2.11.12 </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$SCALA_HOME/bin</span><br></pre></td></tr></table></figure><ul><li><code>source ~/.bashrc</code></li></ul><p><br></p><p><meting-js id="1325896374" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li><li><a href="https://wiki.hushhw.cn/posts/d566ce3c.html">Python-OpenCV学习笔记——像素读取和写入</a></li><li><a href="https://wiki.hushhw.cn/posts/20751.html">Python-OpenCV学习笔记——图片写入及图片质量</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;Java, Python, Scala&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/143320.jpg&quot; alt=&quot;maximilian-weisbecker-544039-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="语言" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/%E8%AF%AD%E8%A8%80/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Java" scheme="https://alessa0.cn/tags/Java/"/>
    
      <category term="Python" scheme="https://alessa0.cn/tags/Python/"/>
    
      <category term="Scala" scheme="https://alessa0.cn/tags/Scala/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 集群搭建(一)：节点配置</title>
    <link href="https://alessa0.cn/posts/b7d573f0/"/>
    <id>https://alessa0.cn/posts/b7d573f0/</id>
    <published>2019-04-24T09:30:50.000Z</published>
    <updated>2019-07-17T08:44:56.024Z</updated>
    
    <content type="html"><![CDATA[<!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --><p></p><p class="description">虚拟机节点配置</p><br><img src="https://image.alessa0.cn/131223.jpg" alt="arian-darvishi-1210156-unsplash"><p></p><a id="more"></a><blockquote class="blockquote-center"><p>Hello, BigData</p></blockquote><h1 id="集群环境"><a href="#集群环境" class="headerlink" title="集群环境"></a>集群环境</h1><p><strong>系统：</strong></p><p>CentOS-7-x86_64-Minimal-1810.iso</p><ul><li><p><strong>Master</strong> 192.168.69.101</p></li><li><p><strong>Slave1</strong> 192.168.69.102</p></li><li><p><strong>Slave2</strong> 192.168.69.103</p></li></ul><p><strong>修改IP地址：</strong></p><ul><li><code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code></li></ul><span class="label danger">Master</span><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下信息</span><br><span class="line">IPADDR=<span class="number">192.168</span><span class="number">.69</span><span class="number">.101</span> </span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line">GATEWAY=<span class="number">192.168</span><span class="number">.69</span><span class="number">.2</span> </span><br><span class="line">DNS1=<span class="number">119.29</span><span class="number">.29</span><span class="number">.29</span></span><br></pre></td></tr></table></figure><span class="label danger">仅在Slave1</span><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下信息</span><br><span class="line">IPADDR=<span class="number">192.168</span><span class="number">.69</span><span class="number">.102</span> </span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line">GATEWAY=<span class="number">192.168</span><span class="number">.69</span><span class="number">.2</span> </span><br><span class="line">DNS1=<span class="number">119.29</span><span class="number">.29</span><span class="number">.29</span></span><br></pre></td></tr></table></figure><span class="label danger">仅在Slave2</span><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改如下信息</span><br><span class="line">IPADDR=<span class="number">192.168</span><span class="number">.69</span><span class="number">.103</span> </span><br><span class="line">NETMASK=<span class="number">255.255</span><span class="number">.255</span><span class="number">.0</span> </span><br><span class="line">GATEWAY=<span class="number">192.168</span><span class="number">.69</span><span class="number">.2</span> </span><br><span class="line">DNS1=<span class="number">119.29</span><span class="number">.29</span><span class="number">.29</span></span><br></pre></td></tr></table></figure><h1 id="关闭系统防火墙及内核防火墙"><a href="#关闭系统防火墙及内核防火墙" class="headerlink" title="关闭系统防火墙及内核防火墙"></a>关闭系统防火墙及内核防火墙</h1><p><strong>永久关闭内核防火墙：</strong></p><ul><li><p><code>yum -y install vim</code></p></li><li><p><code>vim /etc/selinux/config</code></p></li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改如下信息</span></span><br><span class="line"><span class="attr">SELINUX</span>=disabled</span><br></pre></td></tr></table></figure><p><strong>停止firewall：</strong></p><ul><li><code>systemctl stop firewalld.service</code></li></ul><p><strong>禁止firewall开机启动：</strong></p><ul><li><code>systemctl disable firewalld.service</code></li></ul><h1 id="修改主机文件"><a href="#修改主机文件" class="headerlink" title="修改主机文件"></a>修改主机文件</h1><p><strong>修改主机名：</strong></p><span class="label danger">仅在Master</span><ul><li><code>hostnamectl set-hostname master</code></li></ul><span class="label danger">仅在Slave1</span><ul><li><code>hostnamectl set-hostname slave1</code></li></ul><span class="label danger">仅在Slave2</span><ul><li><code>hostnamectl set-hostname slave2</code></li></ul><p><strong>修改hosts文件：</strong></p><ul><li><code>vim /etc/hosts</code></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 添加如下信息</span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.69</span><span class="selector-class">.101</span> <span class="selector-tag">master</span> </span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.69</span><span class="selector-class">.102</span> <span class="selector-tag">slave1</span> </span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.69</span><span class="selector-class">.103</span> <span class="selector-tag">slave2</span> </span><br><span class="line"># 本地(可不加)</span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.69</span><span class="selector-class">.1</span> <span class="selector-tag">client</span></span><br></pre></td></tr></table></figure><h1 id="SSH互信配置"><a href="#SSH互信配置" class="headerlink" title="SSH互信配置"></a>SSH互信配置</h1><p><strong>生成密钥对（公钥和私钥）–三次回车生成密钥：</strong></p><ul><li><code>ssh-keygen -t rsa -P &#39;&#39;</code></li></ul><p><strong>追加：</strong></p><ul><li><p><code>cat ~/.ssh/id_rsa.pub &gt; ~/.ssh/authorized_keys</code></p></li><li><p><code>chmod g-w ~</code></p></li><li><p><code>chmod 700 ~/.ssh</code></p></li><li><p><code>chmod 600 ~/.ssh/authorized_keys</code></p></li></ul><p><strong>追加密钥到Master：</strong></p><ul><li><code>ssh [ 主机名 ] cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</code></li></ul><p><strong>复制密钥到从节点：</strong></p><ul><li><code>scp ~/.ssh/authorized_keys [ 主机名 ]:~/.ssh/authorized_keys</code></li></ul><h1 id="设置vmware共享文件夹"><a href="#设置vmware共享文件夹" class="headerlink" title="设置vmware共享文件夹"></a>设置vmware共享文件夹</h1><p>cd /mnt/hgfs/ 发现没有文件，解决如下</p><p><strong>安装工具：</strong></p><ul><li><code>yum -y install open-vm-tools gcc gcc-c++ automake make kernel-devel git</code></li></ul><p><strong>终端中输入如下命令：</strong></p><ul><li><p><code>git clone https://github.com/rasa/vmware-tools-patches.git</code></p></li><li><p><code>cd vmware-tools-patches</code></p></li><li><p><code></code>./patched-open-vm-tools.sh`</p></li></ul><p><strong>查看分享目录：</strong></p><ul><li><p><code>vmware-hgfsclient</code></p></li><li><p><code>su</code></p></li></ul><p><strong>临时挂载分享目录：</strong></p><ul><li><code>mount.vmhgfs .host:/ /mnt/hgfs/</code></li></ul><p><strong>永久挂载分享目录：</strong></p><ul><li><code>vmware-config-tools.pl -d --clobber-kernel-modules=vmhgfs</code></li></ul><p><strong>#使用如下方法挂载有的会出错：</strong></p><ul><li><code>vim /etc/fstab</code></li></ul><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 末尾添加如下信息</span></span><br><span class="line"><span class="string">.host</span>:/ <span class="string">/mnt/hgfs</span> fuse.vmhgfs-fuse allow_other 0 0</span><br></pre></td></tr></table></figure><p><strong>删除工具包</strong></p><ul><li><p><code>cd ~</code></p></li><li><p><code>rm -rf ~/vmware-tools-patches</code></p></li><li><p><code>reboot</code></p></li></ul><h1 id="修改src权限"><a href="#修改src权限" class="headerlink" title="修改src权限"></a>修改src权限</h1><ul><li><p><code>cd /usr/local</code></p></li><li><p><code>sudo chown -R alessa0:alessa0 src</code></p></li><li><p><code>sudo chown -R alessa0:alessa0 bin</code></p></li></ul><p><strong>更改源为阿里云：</strong></p><ul><li><code>cd /etc/yum.repos.d/</code></li><li><code>mv CentOS-Base.repo CentOS-Base.repo.bak</code></li><li><code>wget http://mirrors.aliyun.com/repo/Centos-7.repo</code></li><li><code>wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</code></li><li><code>yum clean all</code></li><li><code>yum makecache</code></li></ul><p><strong>安装网络工具包和基础工具包：</strong></p><ul><li><code>sudo yum -y install net-tools checkpolicy gcc dkms foomatic openssh-server bash-completion psmisc</code></li></ul><h1 id="Hadoop集群组件列表"><a href="#Hadoop集群组件列表" class="headerlink" title="Hadoop集群组件列表"></a>Hadoop集群组件列表</h1><table><thead><tr><th>组件</th><th style="text-align:center">master</th><th style="text-align:center">slave1</th><th style="text-align:center">slave2</th></tr></thead><tbody><tr><td>jdk1.8.0_212</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>miniconda3</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>scala-2.11.12</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>hadoop-2.8.5</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>redis-5.0.4</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>zookeeper-3.4.14</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>spark-2.3.3-bin-hadoop2.7</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>mariadb/mariadb-server</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>apache-hive-2.3.4-bin</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>hbase-1.3.3</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>thrift-0.12.0</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>apache-flume-1.9.0-bin</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>kafka_2.11-2.2.0</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>apache-storm-1.2.2</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr><tr><td>Storm-on-Yarn</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td>flink-1.8.0</td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td><td style="text-align:center"><strong>√</strong></td></tr></tbody></table><p><br></p><p><meting-js id="1325896374" server="netease" type="song" preload="none"><br></meting-js></p><hr><!-- rebuild by neat --><div><h1>推荐文章:</h1><ul><li><a href="https://alessa0.cn/posts/55aa9f3f/">Hadoop 集群搭建(八)：Spark</a></li><li><a href="https://alessa0.cn/posts/6a54df13/">Hadoop 集群搭建(十四)：Storm on Yarn</a></li></ul></div>]]></content>
    
    <summary type="html">
    
      &lt;!-- build time:Wed Jul 17 2019 17:48:34 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;description&quot;&gt;虚拟机节点配置&lt;/p&gt;&lt;br&gt;&lt;img src=&quot;https://image.alessa0.cn/131223.jpg&quot; alt=&quot;arian-darvishi-1210156-unsplash&quot;&gt;&lt;p&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="技术" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
      <category term="大数据" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="环境搭建" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="CentOS 7" scheme="https://alessa0.cn/categories/%E6%8A%80%E6%9C%AF/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/CentOS-7/"/>
    
    
      <category term="BigData" scheme="https://alessa0.cn/tags/BigData/"/>
    
      <category term="Hadoop环境搭建" scheme="https://alessa0.cn/tags/Hadoop%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
      <category term="Vmware" scheme="https://alessa0.cn/tags/Vmware/"/>
    
  </entry>
  
</feed>
